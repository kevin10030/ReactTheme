{"ast":null,"code":"var _jsxFileName = \"D:\\\\CSH\\\\A\\\\IoT\\\\Web\\\\Training\\\\trainingapp\\\\web\\\\src\\\\modules\\\\courses\\\\Orders.jsx\";\nimport React, { Component, useEffect } from 'react';\nimport { CButton, CCard, CCardBody, CCardHeader, CCardFooter, CCol, CRow, CDataTable, CForm, CFormGroup, CFormText, CLink, CInput, CLabel, CSelect, CInputGroup, CInputGroupPrepend, CInputGroupText } from '@coreui/react';\nimport { useSelector } from 'react-redux';\nimport { NavLink as RouterLink, Route, useHistory } from \"react-router-dom\";\nimport MuiAlert from '@material-ui/lab/Alert';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport CIcon from '@coreui/icons-react';\nimport axios from 'axios';\nimport Config from '../../common/Config';\n\nfunction Alert(props) {\n  return /*#__PURE__*/React.createElement(MuiAlert, Object.assign({\n    elevation: 6\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 10\n    }\n  }));\n}\n\nexport default function Orders() {\n  const {\n    useState\n  } = React;\n  const history = useHistory(); // const loginUser = useSelector(state => state.loginUser);\n\n  const [loginUser, setLoginUser] = useState({});\n  const [currentCoursePage, setCurrentCoursePage] = useState(1);\n  const [currentCoursePagination, setCurrentCoursePagination] = useState(5);\n\n  const getLastVal_Course = currentPage => {\n    if (currentPage * currentCoursePagination < courseList.length) return currentPage * currentCoursePagination;\n    return courseList.length;\n  };\n\n  const [currentUserPage, setCurrentUserPage] = useState(1);\n  const [currentUserPagination, setCurrentUserPagination] = useState(5);\n\n  const getLastVal_User = currentPage => {\n    if (currentPage * currentUserPagination < userList.length) return currentPage * currentUserPagination;\n    return userList.length;\n  };\n\n  const fields = [{\n    key: 'coursename',\n    label: 'Title',\n    _style: {\n      width: '20%'\n    }\n  }, {\n    key: 'price',\n    label: 'Price',\n    _style: {\n      width: '10%'\n    }\n  }, {\n    key: 'expiryduration',\n    label: 'Expiry Duration',\n    _style: {\n      width: '20%'\n    }\n  }, {\n    key: 'actions',\n    label: '',\n    _style: {\n      width: '1%'\n    },\n    sorter: false,\n    filter: false\n  }];\n  const fields_users = [{\n    key: 'email',\n    label: 'Email',\n    _style: {\n      width: '10%'\n    }\n  }, {\n    key: 'status',\n    label: 'Status',\n    _style: {\n      width: '20%'\n    }\n  }, {\n    key: 'actions',\n    label: '',\n    _style: {\n      width: '1%'\n    },\n    sorter: false,\n    filter: false\n  }];\n  const [adminid, setAdminId] = React.useState(\"adminid\");\n  const [courseOrderId, setCourseOrderId] = useState(-1);\n  const [currency, setCurrency] = useState('SGD');\n  const [price, setPrice] = useState('');\n  const [userOrderId, setUserOrderId] = useState('');\n  const [toast, showToast] = React.useState(false);\n  const [toastMessage, setToastMessage] = React.useState('');\n  const [toastClass, setToastClass] = React.useState('success');\n  const [loading, setLoading] = React.useState(false);\n  const [courseList, setCourseList] = React.useState([]);\n  const [userloading, setUserLoading] = React.useState(false);\n  const [userList, setUserList] = React.useState([]);\n  const [orderList, setOrderList] = React.useState([]);\n  const [orderItemList, setOrderItemList] = React.useState([]);\n  React.useEffect(() => {\n    if (localStorage.getItem('loginUser')) {\n      var loginUser = JSON.parse(localStorage.getItem('loginUser'));\n      setLoginUser(loginUser);\n      console.log('loginUser2 ===> ' + JSON.stringify(loginUser));\n      setAdminId(loginUser.userId);\n\n      if (loginUser.userrole !== 'admin') {\n        history.push('/');\n      }\n    } else {\n      history.push('/auth/login-page');\n    }\n\n    getCourseList();\n  }, []);\n\n  const getUser = async email => {\n    setLoading(true);\n    axios({\n      url: Config.BACKEND_API_URL + '/user',\n      method: 'get',\n      headers: {\n        'Content-Type': 'application/json',\n        'user-email': email\n      }\n    }).then(function (response) {\n      console.log(response.data);\n      setAdminId(response.data.userId);\n      setLoading(false);\n    }).catch(function (error) {\n      console.log(error.response);\n      setLoading(false);\n    });\n  };\n\n  const getCourseList = async () => {\n    setLoading(true);\n    axios({\n      url: Config.BACKEND_API_URL + '/course',\n      method: 'get'\n    }).then(function (response) {\n      const list = response.data.sort((a, b) => a.createdtime > b.createdtime ? 1 : -1);\n      console.log(list);\n      setCourseList(list);\n      setLoading(false);\n    }).catch(function (error) {\n      console.log(error.response);\n      setLoading(false);\n    });\n  };\n\n  const getUserList = async (courseid, expiryduration, orderlist, orderitemlist, paymentlist) => {\n    setUserLoading(true);\n    axios({\n      url: Config.BACKEND_API_URL + '/users',\n      method: 'get'\n    }).then(function (response) {\n      console.log(orderlist);\n      console.log(orderitemlist);\n      console.log(response.data); // setUserList(response.data);\n\n      const list = response.data;\n\n      for (var i = 0; i < list.length; i++) {\n        list[i]['status'] = getOrderStatus(courseid, expiryduration, orderlist, orderitemlist, paymentlist, list[i]);\n      }\n\n      setUserList(list);\n      setUserLoading(false);\n    }).catch(function (error) {\n      console.log(error.response);\n      setUserLoading(false);\n    });\n  };\n\n  const getPaymentList = async (courseid, expiryduration, orderlist, orderitemlist) => {\n    setUserLoading(true);\n    const paymentList = await axios({\n      url: Config.BACKEND_API_URL + '/payment',\n      method: 'get'\n    }).then(response => response.data).then(data => {\n      setUserLoading(false);\n      return data.sort((a, b) => a.updatedtime > b.updatedtime ? -1 : 1); //   descending\n    }).catch(error => {\n      setUserLoading(false);\n    });\n    getUserList(courseid, expiryduration, orderlist, orderitemlist, paymentList);\n  };\n\n  const getOrderItemList = async (courseid, expiryduration, orderlist) => {\n    setUserLoading(true);\n    const list = await axios({\n      url: Config.BACKEND_API_URL + '/orderitem',\n      method: 'get'\n    }).then(function (response) {\n      const list = response.data.sort((a, b) => a.updatedtime > b.updatedtime ? -1 : 1); //descending\n\n      setOrderItemList(list); // console.log(list)\n\n      setUserLoading(false);\n      return list;\n    }).catch(function (error) {\n      console.log(error.response);\n      setUserLoading(false);\n    });\n    getPaymentList(courseid, expiryduration, orderlist, list);\n  };\n\n  function getDateTimeString(timestamp) {\n    const date = new Date(Number(timestamp));\n    return date.toLocaleString(\"en-US\");\n  }\n\n  const getOrderList = async (courseid, expiryduration) => {\n    setUserLoading(true);\n    const list = await axios({\n      url: Config.BACKEND_API_URL + '/order',\n      method: 'get'\n    }).then(function (response) {\n      const list = response.data.sort((a, b) => a.updatedtime > b.updatedtime ? -1 : 1); //descending\n      // console.log(list)\n\n      setOrderList(list);\n      setUserLoading(false);\n      return list;\n    }).catch(function (error) {\n      console.log(error.response);\n      setUserLoading(false);\n    });\n    getOrderItemList(courseid, expiryduration, list);\n  };\n\n  const getOrderStatus = (courseid, expiryduration, orderlist, orderitemlist, paymentlist, user) => {\n    for (var i = 0; i < orderitemlist.length; i++) {\n      if (orderitemlist[i].productid === courseid) {\n        // const order = orderList.slice().reverse().find(order => (order.orderid === orderItemList[i].orderid) && (order.userid == item.userId))\n        const order = orderlist.find(order => order.orderid === orderitemlist[i].orderid && order.userid === user.userId);\n\n        if (order) {\n          if (order.status === \"Purchased\") {\n            const payment = paymentlist.find(payment => payment.orderitemid === orderitemlist[i].orderitemid);\n\n            if (payment) {\n              const date = new Date(Number(payment.updatedtime));\n              date.setMonth(date.getMonth() + parseInt(expiryduration));\n\n              if (date >= Date.now()) {\n                return order.status;\n              } else return \"Admin unassigned\";\n            } else {\n              return \"Admin unassigned\";\n            }\n          } else return order.status;\n        }\n      }\n    }\n\n    return \"Admin unassigned\";\n  };\n\n  const editOrders = item => {\n    setCourseOrderId(item.courseid);\n    setCurrency(item.currency);\n    setPrice(item.price);\n    getOrderList(item.courseid, item.expiryduration);\n  };\n\n  const UpdateList = (item, status) => {\n    const user = userList.find(user => user.userId === item.userId);\n    var index = userList.indexOf(user);\n    userList[index]['status'] = status;\n    setUserList(userList.map(a => ({ ...a\n    })));\n  };\n\n  const OrderActive = (item, status) => {\n    // userid, status, ordertype, productid, currency, price, updatedby,updatedtime\n    setUserLoading(true);\n    axios({\n      url: Config.BACKEND_API_URL + '/order',\n      method: 'post',\n      data: {\n        userid: item.userId,\n        status: status,\n        ordertype: \"Course\",\n        productid: courseOrderId,\n        currency: currency,\n        price: price.toString(),\n        updatedby: adminid.toString(),\n        updatedtime: Date.now().toString()\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      setToastClass('success');\n      setToastMessage('Success: ' + response.data);\n      showToast(true);\n      UpdateList(item, status);\n      setUserLoading(false);\n    }).catch(function (error) {\n      setToastClass('Warning');\n      setToastMessage('Warning: ' + error.response.data);\n      showToast(true);\n      setUserLoading(false);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"animated fadeIn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    xl: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CCard, {\n    custom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CCardHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 13\n    }\n  }, \"Courses\"), /*#__PURE__*/React.createElement(CCardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CDataTable, {\n    items: courseList,\n    fields: fields // columnFilter\n    ,\n    tableFilter: true // footer\n    ,\n    itemsPerPageSelect: false,\n    itemsPerPage: currentCoursePagination,\n    dark: false,\n    hover: false,\n    border: false,\n    outlined: false,\n    loading: false,\n    sorter: false // clickableRows\n    ,\n    pagination: {\n      doubleArrows: true,\n      align: 'center'\n    },\n    loading: loading // onRowClick={(item,index,col,e) => {console.log(item,index,col,e)}}\n    ,\n    onPageChange: val => {\n      setCurrentCoursePage(val);\n    } // onPagesChange={(val) => console.log('new pages:', val)}\n    ,\n    onPaginationChange: val => {\n      setCurrentCoursePagination(val);\n    } // onFilteredItemsChange={(val) => console.log('new filtered items:', val)}\n    // onSorterValueChange={(val) => console.log('new sorter value:', val)}\n    // onTableFilterChange={(val) => console.log('new table filter:', val)}\n    // onColumnFilterChange={(val) => console.log('new column filter:', val)}\n    ,\n    scopedSlots: {\n      'price': item => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 25\n          }\n        }, item.price + \" \" + courseList.find(pCourse => pCourse.courseid === item.courseid).currency);\n      },\n      'expiryduration': item => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 25\n          }\n        }, item.expiryduration + \" months\");\n      },\n      'actions': item => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          className: \"py-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 25\n          }\n        }, courseOrderId != item.courseid ? /*#__PURE__*/React.createElement(CButton, {\n          size: \"sm\",\n          color: \"info\",\n          onClick: e => {\n            e.preventDefault();\n            editOrders(item);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 31\n          }\n        }, \"Order\") : /*#__PURE__*/React.createElement(CButton, {\n          size: \"sm\",\n          color: \"info\",\n          disabled: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 33\n          }\n        }, \"Order\"));\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(CRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    xs: \"9\",\n    md: \"8\",\n    style: {\n      alignSelf: \"center\",\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"spin\", {\n    style: {\n      marginTop: \"5px\",\n      marginRight: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 21\n    }\n  }, \"Items per page:\"), /*#__PURE__*/React.createElement(CSelect, {\n    name: \"itemsperpage\",\n    id: \"itemsperpage\",\n    style: {\n      width: \"70px\"\n    },\n    onChange: e => setCurrentCoursePagination(e.target.value),\n    value: currentCoursePagination,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 23\n    }\n  }, \"5\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 23\n    }\n  }, \"10\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 23\n    }\n  }, \"15\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 23\n    }\n  }, \"20\"))), /*#__PURE__*/React.createElement(CCol, {\n    xs: \"3\",\n    md: \"4\",\n    style: {\n      alignSelf: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"spin\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 21\n    }\n  }, (currentCoursePage - 1) * currentCoursePagination + 1 + '-' + getLastVal_Course(currentCoursePage) + ' of ' + courseList.length))))))), /*#__PURE__*/React.createElement(CCol, {\n    xl: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CCard, {\n    custom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CCardHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 13\n    }\n  }, \"User Orders \", courseOrderId !== -1 ? '( ' + courseList.find(pCourse => pCourse.courseid === courseOrderId).coursename + ' )' : ''), /*#__PURE__*/React.createElement(CCardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CDataTable, {\n    items: userList,\n    fields: fields_users // columnFilter\n    ,\n    tableFilter: true // footer\n    ,\n    itemsPerPageSelect: false,\n    itemsPerPage: currentUserPagination,\n    dark: false,\n    hover: false,\n    border: false,\n    outlined: false,\n    sorter: false // clickableRows\n    ,\n    pagination: {\n      doubleArrows: true,\n      align: 'center'\n    },\n    loading: userloading // onRowClick={(item,index,col,e) => {console.log(item,index,col,e)}}\n    ,\n    onPageChange: val => {\n      setCurrentUserPage(val);\n    } // onPagesChange={(val) => console.log('new pages:', val)}\n    ,\n    onPaginationChange: val => {\n      setCurrentUserPagination(val);\n    } // onFilteredItemsChange={(val) => console.log('new filtered items:', val)}\n    // onSorterValueChange={(val) => console.log('new sorter value:', val)}\n    // onTableFilterChange={(val) => console.log('new table filter:', val)}\n    // onColumnFilterChange={(val) => console.log('new column filter:', val)}\n    ,\n    scopedSlots: {\n      'email': item => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 25\n          }\n        }, item.email);\n      },\n      'status': item => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 25\n          }\n        }, // getOrderStatus(item)\n        item.status);\n      },\n      'actions': item => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          className: \"py-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 25\n          }\n        }, item.status == 'Admin unassigned' || item.status == 'Expired' ? /*#__PURE__*/React.createElement(CButton, {\n          size: \"sm\",\n          color: \"primary\",\n          onClick: e => {\n            e.preventDefault();\n            OrderActive(item, \"Admin assigned\");\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 33\n          }\n        }, \"\\xA0Active\\xA0\") : item.status == 'Purchased' ? /*#__PURE__*/React.createElement(CButton, {\n          size: \"sm\",\n          color: \"danger\",\n          disabled: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 35\n          }\n        }, \"InActive\") : /*#__PURE__*/React.createElement(CButton, {\n          size: \"sm\",\n          color: \"danger\",\n          onClick: e => {\n            e.preventDefault();\n            OrderActive(item, \"Admin unassigned\");\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 34\n          }\n        }, \"InActive\"));\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(CRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    xs: \"9\",\n    md: \"8\",\n    style: {\n      alignSelf: \"center\",\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"spin\", {\n    style: {\n      marginTop: \"5px\",\n      marginRight: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 21\n    }\n  }, \"Items per page:\"), /*#__PURE__*/React.createElement(CSelect, {\n    name: \"itemsperpage\",\n    id: \"itemsperpage\",\n    style: {\n      width: \"70px\"\n    },\n    onChange: e => setCurrentUserPagination(e.target.value),\n    value: currentUserPagination,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 23\n    }\n  }, \"5\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 23\n    }\n  }, \"10\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 23\n    }\n  }, \"15\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 23\n    }\n  }, \"20\"))), /*#__PURE__*/React.createElement(CCol, {\n    xs: \"3\",\n    md: \"4\",\n    style: {\n      alignSelf: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"spin\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 21\n    }\n  }, (currentUserPage - 1) * currentUserPagination + 1 + '-' + getLastVal_User(currentUserPage) + ' of ' + userList.length))))))), /*#__PURE__*/React.createElement(CCol, {\n    sm: \"12\",\n    lg: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    open: toast,\n    autoHideDuration: 3000,\n    onClose: () => {\n      showToast(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    severity: toastClass,\n    action: /*#__PURE__*/React.createElement(CButton, {\n      onClick: e => {\n        e.preventDefault();\n        showToast(false);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CIcon, {\n      name: \"cil-x\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 87\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 13\n    }\n  }, toastMessage)))));\n}","map":{"version":3,"sources":["D:/CSH/A/IoT/Web/Training/trainingapp/web/src/modules/courses/Orders.jsx"],"names":["React","Component","useEffect","CButton","CCard","CCardBody","CCardHeader","CCardFooter","CCol","CRow","CDataTable","CForm","CFormGroup","CFormText","CLink","CInput","CLabel","CSelect","CInputGroup","CInputGroupPrepend","CInputGroupText","useSelector","NavLink","RouterLink","Route","useHistory","MuiAlert","Snackbar","CIcon","axios","Config","Alert","props","Orders","useState","history","loginUser","setLoginUser","currentCoursePage","setCurrentCoursePage","currentCoursePagination","setCurrentCoursePagination","getLastVal_Course","currentPage","courseList","length","currentUserPage","setCurrentUserPage","currentUserPagination","setCurrentUserPagination","getLastVal_User","userList","fields","key","label","_style","width","sorter","filter","fields_users","adminid","setAdminId","courseOrderId","setCourseOrderId","currency","setCurrency","price","setPrice","userOrderId","setUserOrderId","toast","showToast","toastMessage","setToastMessage","toastClass","setToastClass","loading","setLoading","setCourseList","userloading","setUserLoading","setUserList","orderList","setOrderList","orderItemList","setOrderItemList","localStorage","getItem","JSON","parse","console","log","stringify","userId","userrole","push","getCourseList","getUser","email","url","BACKEND_API_URL","method","headers","then","response","data","catch","error","list","sort","a","b","createdtime","getUserList","courseid","expiryduration","orderlist","orderitemlist","paymentlist","i","getOrderStatus","getPaymentList","paymentList","updatedtime","getOrderItemList","getDateTimeString","timestamp","date","Date","Number","toLocaleString","getOrderList","user","productid","order","find","orderid","userid","status","payment","orderitemid","setMonth","getMonth","parseInt","now","editOrders","item","UpdateList","index","indexOf","map","OrderActive","ordertype","toString","updatedby","doubleArrows","align","val","pCourse","e","preventDefault","alignSelf","display","marginTop","marginRight","target","value","textAlign","coursename","vertical","horizontal"],"mappings":"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","sourcesContent":["import React, { Component, useEffect } from 'react'\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCardFooter,\r\n  CCol,\r\n  CRow, CDataTable, CForm, CFormGroup, CFormText, CLink, CInput, CLabel, CSelect,\r\n  CInputGroup,\r\n  CInputGroupPrepend,\r\n  CInputGroupText,\r\n} from '@coreui/react';\r\n\r\nimport { useSelector } from 'react-redux';\r\nimport { NavLink as RouterLink, Route, useHistory } from \"react-router-dom\";\r\n\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\n\r\nimport CIcon from '@coreui/icons-react'\r\nimport axios from 'axios';\r\nimport Config from '../../common/Config'\r\n\r\nfunction Alert(props) {\r\n  return <MuiAlert elevation={6} {...props} />;\r\n}\r\n\r\nexport default function Orders() {\r\n  const { useState } = React;\r\n  const history = useHistory();\r\n  // const loginUser = useSelector(state => state.loginUser);\r\n  const [loginUser, setLoginUser] = useState({})\r\n\r\n  const [currentCoursePage, setCurrentCoursePage] = useState(1)\r\n  const [currentCoursePagination, setCurrentCoursePagination] = useState(5)\r\n  const getLastVal_Course = (currentPage) => {\r\n    if (currentPage * currentCoursePagination < courseList.length)\r\n      return currentPage * currentCoursePagination;\r\n    return courseList.length;\r\n  }\r\n\r\n  const [currentUserPage, setCurrentUserPage] = useState(1)\r\n  const [currentUserPagination, setCurrentUserPagination] = useState(5)\r\n  const getLastVal_User = (currentPage) => {\r\n    if (currentPage * currentUserPagination < userList.length)\r\n      return currentPage * currentUserPagination;\r\n    return userList.length;\r\n  }\r\n\r\n\r\n  const fields = [\r\n    { key: 'coursename',label:'Title', _style: { width: '20%' } },\r\n    { key: 'price',label:'Price', _style: { width: '10%' } },\r\n    { key: 'expiryduration',label:'Expiry Duration', _style: { width: '20%' } },\r\n    {\r\n      key: 'actions',\r\n      label: '',\r\n      _style: { width: '1%' },\r\n      sorter: false,\r\n      filter: false\r\n    },\r\n  ]\r\n\r\n  const fields_users = [\r\n    { key: 'email',label:'Email', _style: { width: '10%' } },\r\n    { key: 'status',label:'Status', _style: { width: '20%' } },\r\n    {\r\n      key: 'actions',\r\n      label: '',\r\n      _style: { width: '1%' },\r\n      sorter: false,\r\n      filter: false\r\n    },\r\n  ]\r\n\r\n  const [adminid, setAdminId] = React.useState(\"adminid\")\r\n  const [courseOrderId, setCourseOrderId] = useState(-1)\r\n  const [currency, setCurrency] = useState('SGD')\r\n  const [price, setPrice] = useState('')\r\n\r\n  const [userOrderId, setUserOrderId] = useState('')\r\n\r\n  const [toast, showToast] = React.useState(false);\r\n  const [toastMessage, setToastMessage] = React.useState('');\r\n  const [toastClass, setToastClass] = React.useState('success');\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [courseList, setCourseList] = React.useState([])\r\n\r\n  const [userloading, setUserLoading] = React.useState(false);\r\n  const [userList, setUserList] = React.useState([])\r\n  const [orderList, setOrderList] = React.useState([])\r\n  const [orderItemList, setOrderItemList] = React.useState([])\r\n\r\n  React.useEffect(() => {\r\n    if(localStorage.getItem('loginUser')) {\r\n      var loginUser = JSON.parse(localStorage.getItem('loginUser'))\r\n      setLoginUser(loginUser)\r\n      console.log('loginUser2 ===> ' + JSON.stringify(loginUser));\r\n      setAdminId(loginUser.userId);\r\n      if(loginUser.userrole !== 'admin') {\r\n        history.push('/');\r\n      }\r\n    } else {\r\n      history.push('/auth/login-page');\r\n    }\r\n\r\n    getCourseList();\r\n  }, []);\r\n\r\n  const getUser = async (email) => {\r\n    setLoading(true)\r\n    axios({\r\n      url: Config.BACKEND_API_URL+'/user',\r\n      method: 'get' ,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'user-email': email\r\n      }\r\n    })\r\n    .then(function (response) {\r\n      console.log(response.data)\r\n      setAdminId(response.data.userId)\r\n      setLoading(false)\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      setLoading(false)\r\n     });\r\n  };\r\n\r\n  const getCourseList = async () => {\r\n    setLoading(true)\r\n    axios({\r\n      url: Config.BACKEND_API_URL+'/course',\r\n      method: 'get'\r\n    })\r\n    .then(function (response) {\r\n      const list = response.data.sort((a, b) => a.createdtime > b.createdtime ? 1 : -1)\r\n      console.log(list)\r\n      setCourseList(list);\r\n      setLoading(false)\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      setLoading(false)\r\n     });\r\n  };\r\n\r\n  const getUserList = async (courseid,expiryduration, orderlist, orderitemlist,paymentlist) => {\r\n    setUserLoading(true)\r\n    axios({\r\n      url: Config.BACKEND_API_URL+'/users',\r\n      method: 'get'\r\n    })\r\n    .then(function (response) {\r\n      console.log(orderlist)\r\n      console.log(orderitemlist)\r\n      console.log(response.data)\r\n      // setUserList(response.data);\r\n      const list =  response.data;\r\n      for(var i=0;i<list.length;i++) {\r\n        list[i]['status'] = getOrderStatus(courseid, expiryduration, orderlist, orderitemlist,paymentlist, list[i])\r\n      }\r\n      setUserList(list)\r\n      setUserLoading(false)\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      setUserLoading(false)\r\n     });\r\n  };\r\n\r\n  const getPaymentList = async (courseid,expiryduration, orderlist, orderitemlist) => {\r\n    setUserLoading(true)\r\n    const paymentList = await axios({\r\n      url: Config.BACKEND_API_URL + '/payment',\r\n      method: 'get'\r\n    }).then(response => response.data).then((data) => {\r\n      setUserLoading(false)\r\n      return data.sort((a, b) => a.updatedtime > b.updatedtime ? -1 : 1)   //   descending\r\n    }).catch(error => {\r\n      setUserLoading(false)\r\n    });\r\n\r\n    getUserList(courseid,expiryduration, orderlist, orderitemlist, paymentList);\r\n  };\r\n\r\n  const getOrderItemList = async (courseid, expiryduration, orderlist) => {\r\n    setUserLoading(true)\r\n    const list = await axios({\r\n      url: Config.BACKEND_API_URL+'/orderitem',\r\n      method: 'get'\r\n    })\r\n    .then(function (response) {\r\n      const list = response.data.sort((a, b) => a.updatedtime > b.updatedtime ? -1 : 1) //descending\r\n      setOrderItemList(list)\r\n      // console.log(list)\r\n      setUserLoading(false)\r\n      return list\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      setUserLoading(false)\r\n     });\r\n\r\n     getPaymentList(courseid, expiryduration, orderlist, list)\r\n  };\r\n\r\n  function getDateTimeString(timestamp)\r\n  {\r\n    const date =  new Date(Number(timestamp));\r\n    return date.toLocaleString(\"en-US\");\r\n  }\r\n\r\n\r\n  const getOrderList = async (courseid,expiryduration) => {\r\n    setUserLoading(true)\r\n    const list = await axios({\r\n      url: Config.BACKEND_API_URL+'/order',\r\n      method: 'get'\r\n    })\r\n    .then(function (response) {\r\n      const list = response.data.sort((a, b) => a.updatedtime > b.updatedtime ? -1 : 1) //descending\r\n      // console.log(list)\r\n      setOrderList(list);\r\n      setUserLoading(false)\r\n      return list\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      setUserLoading(false)\r\n     });\r\n\r\n     getOrderItemList(courseid,expiryduration, list);\r\n  };\r\n\r\n  const getOrderStatus = (courseid, expiryduration, orderlist, orderitemlist, paymentlist, user) => {\r\n    for(var i=0;i<orderitemlist.length;i++) {\r\n      if(orderitemlist[i].productid === courseid) {\r\n          // const order = orderList.slice().reverse().find(order => (order.orderid === orderItemList[i].orderid) && (order.userid == item.userId))\r\n          const order = orderlist.find(order => (order.orderid === orderitemlist[i].orderid) && (order.userid === user.userId))\r\n          if(order) {\r\n            if(order.status === \"Purchased\" ) {\r\n              const payment = paymentlist.find(payment => payment.orderitemid === orderitemlist[i].orderitemid)\r\n              if(payment) {\r\n                const date =  new Date(Number(payment.updatedtime));\r\n                date.setMonth(date.getMonth() + parseInt(expiryduration))\r\n                if(date >= Date.now()) {\r\n                  return order.status\r\n                } else return \"Admin unassigned\"\r\n              } else {\r\n                return \"Admin unassigned\"\r\n              }\r\n            } else return order.status\r\n          }\r\n      }\r\n    }\r\n    return \"Admin unassigned\"\r\n  }\r\n\r\n  const editOrders = (item) => {\r\n    setCourseOrderId(item.courseid)\r\n    setCurrency(item.currency)\r\n    setPrice(item.price)\r\n    getOrderList(item.courseid,item.expiryduration);\r\n  }\r\n\r\n  const UpdateList = (item, status) => {\r\n    const user = userList.find(user => user.userId === item.userId)\r\n    var index = userList.indexOf(user)\r\n    userList[index]['status'] = status\r\n    setUserList(userList.map(a => ({...a})))\r\n  }\r\n\r\n  const OrderActive = (item, status) => {\r\n    // userid, status, ordertype, productid, currency, price, updatedby,updatedtime\r\n    setUserLoading(true)\r\n    axios({\r\n      url: Config.BACKEND_API_URL+'/order',\r\n      method: 'post',\r\n      data: {\r\n        userid: item.userId,\r\n        status: status,\r\n        ordertype: \"Course\",\r\n        productid: courseOrderId,\r\n        currency: currency,\r\n        price: price.toString(),\r\n        updatedby: adminid.toString(),\r\n        updatedtime: Date.now().toString()\r\n      },\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(function (response) {\r\n      setToastClass('success');\r\n      setToastMessage('Success: ' + response.data);\r\n      showToast(true);\r\n      UpdateList(item,status)\r\n      setUserLoading(false)\r\n    })\r\n    .catch(function (error) {\r\n      setToastClass('Warning');\r\n      setToastMessage('Warning: ' + error.response.data);\r\n      showToast(true);\r\n      setUserLoading(false)\r\n    });\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"animated fadeIn\">\r\n      <CRow>\r\n        <CCol xl=\"6\">\r\n          <CCard custom>\r\n            <CCardHeader >\r\n              Courses\r\n            </CCardHeader>\r\n            <CCardBody>\r\n              <CDataTable\r\n                items={courseList}\r\n                fields={fields}\r\n                // columnFilter\r\n                tableFilter\r\n                // footer\r\n                itemsPerPageSelect={false}\r\n                itemsPerPage={currentCoursePagination}\r\n                dark={false}\r\n                hover={false}\r\n                border={false}\r\n                outlined={false}\r\n                loading={false}\r\n                sorter={false}\r\n                // clickableRows\r\n                pagination={{ doubleArrows: true, align: 'center' }}\r\n                loading={loading}\r\n                // onRowClick={(item,index,col,e) => {console.log(item,index,col,e)}}\r\n                onPageChange={(val) => {\r\n                  setCurrentCoursePage(val)\r\n                }\r\n                }\r\n                // onPagesChange={(val) => console.log('new pages:', val)}\r\n                onPaginationChange={(val) => {\r\n                  setCurrentCoursePagination(val);\r\n                }}\r\n                // onFilteredItemsChange={(val) => console.log('new filtered items:', val)}\r\n                // onSorterValueChange={(val) => console.log('new sorter value:', val)}\r\n                // onTableFilterChange={(val) => console.log('new table filter:', val)}\r\n                // onColumnFilterChange={(val) => console.log('new column filter:', val)}\r\n                scopedSlots={{\r\n                  'price':\r\n                    item => {\r\n                      return (\r\n                        <td>\r\n                          {\r\n                            item.price + \" \" + courseList.find(pCourse => pCourse.courseid === item.courseid).currency\r\n                          }\r\n                        </td>\r\n                      )\r\n                  },\r\n                  'expiryduration':\r\n                    item => {\r\n                      return (\r\n                        <td>\r\n                          {\r\n                            item.expiryduration + \" months\"\r\n                          }\r\n                        </td>\r\n                      )\r\n                  },\r\n                  'actions':\r\n                    item => {\r\n                      return (\r\n                        <td className=\"py-2\">\r\n                          {\r\n                              courseOrderId != item.courseid ?\r\n                              <CButton size=\"sm\" color=\"info\" onClick={(e) => { e.preventDefault(); editOrders(item) }}>Order</CButton>\r\n                              : <CButton size=\"sm\" color=\"info\" disabled>Order</CButton>\r\n                          }\r\n                        </td>\r\n                      )\r\n                    }\r\n                }}\r\n              />\r\n              <CRow>\r\n                <CCol xs=\"9\" md=\"8\" style={{alignSelf:\"center\", display:'flex'}}>\r\n                    <spin style={{marginTop:\"5px\", marginRight:\"5px\"}}>Items per page:</spin>\r\n                    <CSelect\r\n                      name=\"itemsperpage\"\r\n                      id=\"itemsperpage\"\r\n                      style={{width:\"70px\"}}\r\n                      onChange={e => setCurrentCoursePagination(e.target.value)}\r\n                      value={currentCoursePagination}>\r\n                      <option value=\"5\">5</option>\r\n                      <option value=\"10\">10</option>\r\n                      <option value=\"15\">15</option>\r\n                      <option value=\"20\">20</option>\r\n                    </CSelect>\r\n                </CCol>\r\n                <CCol xs=\"3\" md=\"4\" style={{alignSelf:\"center\"}}>\r\n                  <div  style={{textAlign: 'right' }}>\r\n                    <spin>\r\n                    {\r\n                     ((currentCoursePage - 1) * currentCoursePagination + 1) + '-' + getLastVal_Course(currentCoursePage) + ' of ' + courseList.length\r\n                    }\r\n                    </spin>\r\n                  </div>\r\n                </CCol>\r\n              </CRow>\r\n            </CCardBody>\r\n          </CCard>\r\n        </CCol>\r\n        <CCol xl=\"6\">\r\n          <CCard custom>\r\n            <CCardHeader >\r\n              User Orders {courseOrderId !== -1 ? '( '+ courseList.find(pCourse=>pCourse.courseid === courseOrderId).coursename+ ' )' : ''}\r\n            </CCardHeader>\r\n            <CCardBody>\r\n              <CDataTable\r\n                items={userList}\r\n                fields={fields_users}\r\n                // columnFilter\r\n                tableFilter\r\n                // footer\r\n                itemsPerPageSelect={false}\r\n                itemsPerPage={currentUserPagination}\r\n                dark={false}\r\n                hover={false}\r\n                border={false}\r\n                outlined={false}\r\n                sorter={false}\r\n                // clickableRows\r\n                pagination={{ doubleArrows: true, align: 'center' }}\r\n                loading={userloading}\r\n                // onRowClick={(item,index,col,e) => {console.log(item,index,col,e)}}\r\n                onPageChange={(val) => {\r\n                  setCurrentUserPage(val)\r\n                }\r\n                }\r\n                // onPagesChange={(val) => console.log('new pages:', val)}\r\n                onPaginationChange={(val) => {\r\n                  setCurrentUserPagination(val);\r\n                }}\r\n                // onFilteredItemsChange={(val) => console.log('new filtered items:', val)}\r\n                // onSorterValueChange={(val) => console.log('new sorter value:', val)}\r\n                // onTableFilterChange={(val) => console.log('new table filter:', val)}\r\n                // onColumnFilterChange={(val) => console.log('new column filter:', val)}\r\n                scopedSlots={{\r\n                  'email':\r\n                    item => {\r\n                      return (\r\n                        <td>\r\n                          {\r\n                            item.email\r\n                          }\r\n                        </td>\r\n                      )\r\n                  },\r\n                  'status':\r\n                    item => {\r\n                      return (\r\n                        <td>\r\n                          {\r\n                            // getOrderStatus(item)\r\n                            item.status\r\n                          }\r\n                        </td>\r\n                      )\r\n                  },\r\n                  'actions':\r\n                    item => {\r\n                      return (\r\n                        <td className=\"py-2\">\r\n                          {\r\n                              item.status == 'Admin unassigned' || item.status == 'Expired' ?\r\n                                <CButton size=\"sm\" color=\"primary\" onClick={(e) => { e.preventDefault(); OrderActive(item, \"Admin assigned\");}}>&nbsp;Active&nbsp;</CButton>\r\n                              :\r\n                                item.status == 'Purchased'?\r\n                                  <CButton size=\"sm\" color=\"danger\" disabled>InActive</CButton>\r\n                                :<CButton size=\"sm\" color=\"danger\" onClick={(e) => { e.preventDefault(); OrderActive(item, \"Admin unassigned\");}}>InActive</CButton>\r\n                          }\r\n                        </td>\r\n                      )\r\n                    }\r\n                }}\r\n              />\r\n              <CRow>\r\n                <CCol xs=\"9\" md=\"8\" style={{alignSelf:\"center\", display:'flex'}}>\r\n                    <spin style={{marginTop:\"5px\", marginRight:\"5px\"}}>Items per page:</spin>\r\n                    <CSelect\r\n                      name=\"itemsperpage\"\r\n                      id=\"itemsperpage\"\r\n                      style={{width:\"70px\"}}\r\n                      onChange={e => setCurrentUserPagination(e.target.value)}\r\n                      value={currentUserPagination}>\r\n                      <option value=\"5\">5</option>\r\n                      <option value=\"10\">10</option>\r\n                      <option value=\"15\">15</option>\r\n                      <option value=\"20\">20</option>\r\n                    </CSelect>\r\n                </CCol>\r\n                <CCol xs=\"3\" md=\"4\" style={{alignSelf:\"center\"}}>\r\n                  <div  style={{textAlign: 'right' }}>\r\n                    <spin>\r\n                    {\r\n                      ((currentUserPage - 1) * currentUserPagination + 1) + '-' + getLastVal_User(currentUserPage) + ' of ' + userList.length\r\n                    }\r\n                    </spin>\r\n                  </div>\r\n                </CCol>\r\n              </CRow>\r\n            </CCardBody>\r\n          </CCard>\r\n        </CCol>\r\n        <CCol sm=\"12\" lg=\"6\">\r\n          <Snackbar\r\n            anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n            open={toast}\r\n            autoHideDuration={3000}\r\n            onClose={() => {\r\n              showToast(false);\r\n            }}>\r\n            <Alert\r\n              severity={toastClass}\r\n              action={\r\n                <CButton  onClick={(e) => { e.preventDefault(); showToast(false);  }}><CIcon name=\"cil-x\" /></CButton>\r\n              }\r\n            >\r\n              {toastMessage}\r\n            </Alert>\r\n          </Snackbar>\r\n        </CCol>\r\n      </CRow>\r\n    </div>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}