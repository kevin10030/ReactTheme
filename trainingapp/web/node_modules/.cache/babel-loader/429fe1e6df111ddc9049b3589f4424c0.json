{"ast":null,"code":"var _jsxFileName = \"D:\\\\CSH\\\\A\\\\IoT\\\\Web\\\\Training\\\\trainingapp\\\\web\\\\src\\\\modules\\\\courses\\\\Categories.jsx\";\nimport React, { Component, useEffect } from 'react';\nimport { CButton, CCard, CCardBody, CCardHeader, CCardFooter, CCol, CRow, CDataTable, CForm, CFormGroup, CFormText, CLink, CInput, CLabel, CSelect, CInputGroup, CInputGroupPrepend, CInputGroupText } from '@coreui/react';\nimport { useSelector } from 'react-redux';\nimport { NavLink as RouterLink, Route, useHistory } from \"react-router-dom\";\nimport MuiAlert from '@material-ui/lab/Alert';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport CIcon from '@coreui/icons-react';\nimport axios from 'axios';\nimport Config from '../../common/Config';\n\nfunction Alert(props) {\n  return /*#__PURE__*/React.createElement(MuiAlert, Object.assign({\n    elevation: 6\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 10\n    }\n  }));\n}\n\nexport default function Categories() {\n  const {\n    useState\n  } = React;\n  const history = useHistory(); // const loginUser = useSelector(state => state.loginUser);\n\n  const [loginUser, setLoginUser] = useState({});\n  const [currentPage, setCurrentPage] = useState(1);\n  const [currentPagination, setCurrentPagination] = useState(5);\n\n  const getLastVal = currentPage => {\n    if (currentPage * currentPagination < categoryList.length) return currentPage * currentPagination;\n    return categoryList.length;\n  };\n\n  const fields = [{\n    key: 'categoryname',\n    label: 'Category Name',\n    _style: {\n      width: '70%'\n    }\n  }, {\n    key: 'actions',\n    label: '',\n    _style: {\n      width: '100px'\n    },\n    sorter: false,\n    filter: false\n  }];\n  const [adminid, setAdminId] = React.useState(\"adminid\");\n  const [isAddCategory, setIsAddCategory] = useState(true);\n  const [editId, setEditId] = useState(-1);\n  const [toast, showToast] = React.useState(false);\n  const [toastMessage, setToastMessage] = React.useState('');\n  const [toastClass, setToastClass] = React.useState('success');\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [categoryList, setCategoryList] = React.useState([]);\n  const [categoryName, setCategoryName] = React.useState('');\n  React.useEffect(() => {\n    if (localStorage.getItem('loginUser')) {\n      var loginUser = JSON.parse(localStorage.getItem('loginUser'));\n      setLoginUser(loginUser);\n      console.log('loginUser2 ===> ' + JSON.stringify(loginUser));\n      setAdminId(loginUser.userId);\n\n      if (loginUser.userrole !== 'Admin') {\n        history.push('/');\n      }\n    } else {\n      history.push('/auth/login-page');\n    } // if(loginUser) {\n    //   console.log(loginUser)\n    //   setAdminId(loginUser.userId)\n    //   // getUser(loginUser.email)\n    // }\n\n\n    getCategoryList();\n  }, []);\n\n  const getUser = async email => {\n    setIsLoading(true);\n    axios({\n      url: Config.BACKEND_API_URL + '/admin/user/details',\n      method: 'get',\n      headers: {\n        'Content-Type': 'application/json',\n        'user-email': email\n      }\n    }).then(function (response) {\n      console.log(response.data);\n      setAdminId(response.data.userId);\n      setIsLoading(false);\n    }).catch(function (error) {\n      console.log(error.response);\n      setIsLoading(false);\n    });\n  };\n\n  const getCategoryList = async () => {\n    setIsLoading(true);\n    axios({\n      url: Config.BACKEND_API_URL + '/admin/category/list',\n      method: 'get'\n    }).then(function (response) {\n      const list = response.data.sort((a, b) => a.createdtime > b.createdtime ? 1 : -1);\n      setCategoryList(list);\n      console.log(list);\n      setIsLoading(false);\n    }).catch(function (error) {\n      console.log(error.response); // error.response.data\n\n      setIsLoading(false);\n    });\n  };\n\n  const deleteCategory = item => {\n    // console.log(item)\n    // categoryid, deletedby, deletedtime\n    // handleReset()\n    setIsAddCategory(true);\n    setEditId(-1);\n    setIsLoading(true);\n    axios({\n      url: Config.BACKEND_API_URL + '/admin/category/delete',\n      method: 'delete',\n      data: {\n        categoryid: item.categoryid,\n        deletedby: adminid,\n        deletedtime: Date.now().toString()\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      setToastClass('success');\n      setToastMessage('Success: ' + response.data);\n      showToast(true);\n      setIsLoading(false);\n    }).catch(function (error) {\n      console.log(error.response); // error.response.data\n\n      setIsLoading(false);\n    });\n  };\n\n  const editCategory = item => {\n    // document.getElementById('categoryname-input').value = item.categoryname;\n    setIsAddCategory(false);\n    setEditId(item.categoryid);\n    setCategoryName(item.categoryname);\n  };\n\n  const handleReset = () => {\n    setCategoryName('');\n    setIsAddCategory(true);\n    setEditId(-1);\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    setIsLoading(true);\n\n    if (editId === -1) {\n      axios({\n        url: Config.BACKEND_API_URL + '/admin/category/create',\n        method: 'post',\n        data: {\n          categoryname: categoryName,\n          createdby: adminid,\n          createdtime: Date.now().toString()\n        },\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        setToastClass('success');\n        setToastMessage('Success: ' + response.data);\n        showToast(true);\n        setCategoryName('');\n        setIsLoading(false);\n        handleReset();\n      }).catch(function (error) {\n        console.log(error.response);\n        setToastClass('Warning');\n        setToastMessage('Warning: ' + error.response.data);\n        showToast(true);\n        setIsLoading(false);\n      });\n    } else {\n      axios({\n        url: Config.BACKEND_API_URL + '/admin/category/create',\n        method: 'post',\n        data: {\n          categoryid: editId,\n          categoryname: categoryName,\n          updatedby: adminid,\n          updatedtime: Date.now().toString()\n        },\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        setToastClass('success');\n        setToastMessage('Success: ' + response.data);\n        showToast(true);\n        setCategoryName('');\n        setIsLoading(false);\n        handleReset();\n      }).catch(function (error) {\n        console.log(error.response);\n        setToastClass('Warning');\n        setToastMessage('Warning: ' + error.response.data);\n        showToast(true);\n        setIsLoading(false);\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"animated fadeIn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    xl: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CCard, {\n    custom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CCardHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }\n  }, \"Categories\"), /*#__PURE__*/React.createElement(CCardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CDataTable, {\n    items: categoryList,\n    fields: fields // columnFilter\n    ,\n    tableFilter: true // footer\n    ,\n    itemsPerPageSelect: false,\n    itemsPerPage: currentPagination,\n    dark: false,\n    hover: false,\n    border: false,\n    outlined: false,\n    loading: false,\n    sorter: false // clickableRows\n    ,\n    pagination: {\n      doubleArrows: true,\n      align: 'center'\n    },\n    loading: isLoading // onRowClick={(item,index,col,e) => {console.log(item,index,col,e)}}\n    ,\n    onPageChange: val => {\n      setCurrentPage(val);\n    } // onPagesChange={(val) => console.log('new pages:', val)}\n    ,\n    onPaginationChange: val => {\n      setCurrentPagination(val);\n    } // onFilteredItemsChange={(val) => console.log('new filtered items:', val)}\n    // onSorterValueChange={(val) => console.log('new sorter value:', val)}\n    // onTableFilterChange={(val) => console.log('new table filter:', val)}\n    // onColumnFilterChange={(val) => console.log('new column filter:', val)}\n    ,\n    scopedSlots: {\n      'actions': item => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          className: \"py-2\",\n          style: {\n            display: 'flex',\n            justifyContent: 'flex-end',\n            textAlign: 'right'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 25\n          }\n        }, editId != item.categoryid ? /*#__PURE__*/React.createElement(CButton, {\n          size: \"sm\",\n          color: \"info\",\n          onClick: e => {\n            e.preventDefault();\n            editCategory(item);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 31\n          }\n        }, \"Edit\") : /*#__PURE__*/React.createElement(CButton, {\n          size: \"sm\",\n          color: \"info\",\n          disabled: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 33\n          }\n        }, \"Edit\"), /*#__PURE__*/React.createElement(CButton, {\n          size: \"sm\",\n          color: \"danger\",\n          className: \"ml-1\",\n          onClick: e => {\n            e.preventDefault();\n            deleteCategory(item);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 27\n          }\n        }, \"Delete\"));\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(CRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    xs: \"9\",\n    md: \"8\",\n    style: {\n      alignSelf: \"center\",\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"spin\", {\n    style: {\n      marginTop: \"5px\",\n      marginRight: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 21\n    }\n  }, \"Items per page:\"), /*#__PURE__*/React.createElement(CSelect, {\n    name: \"itemsperpage\",\n    id: \"itemsperpage\",\n    style: {\n      width: \"70px\"\n    },\n    onChange: e => setCurrentPagination(e.target.value),\n    value: currentPagination,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 23\n    }\n  }, \"5\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 23\n    }\n  }, \"10\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 23\n    }\n  }, \"15\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 23\n    }\n  }, \"20\"))), /*#__PURE__*/React.createElement(CCol, {\n    xs: \"3\",\n    md: \"4\",\n    style: {\n      alignSelf: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"spin\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 21\n    }\n  }, (currentPage - 1) * currentPagination + 1 + '-' + getLastVal(currentPage) + ' of ' + categoryList.length))))))), /*#__PURE__*/React.createElement(CCol, {\n    xl: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CCard, {\n    custom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CCardHeader, {\n    id: \"headingOne\",\n    style: {\n      display: 'inline-flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }\n  }, isAddCategory ? 'Add Category' : 'Edit Category'), /*#__PURE__*/React.createElement(CCardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CForm, {\n    onSubmit: handleSubmit,\n    className: \"form-horizontal\",\n    name: \"simpleForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CInputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CInputGroupPrepend, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(CInputGroupText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 21\n    }\n  }, \"@\")), /*#__PURE__*/React.createElement(CInput, {\n    type: \"text\",\n    label: \"Category Name\",\n    name: \"categoryname-input\",\n    id: \"categoryname-input\",\n    placeholder: \"Category Name\",\n    autoComplete: \"given-name\",\n    onChange: e => setCategoryName(e.target.value),\n    value: categoryName,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"150px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CButton, {\n    type: \"submit\",\n    size: \"sm\",\n    color: \"primary\",\n    style: {\n      marginRight: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(CIcon, {\n    name: \"cil-save\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 98\n    }\n  }), \" Save\"), /*#__PURE__*/React.createElement(CButton, {\n    type: \"reset\",\n    size: \"sm\",\n    color: \"danger\",\n    onClick: handleReset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(CIcon, {\n    name: \"cil-ban\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 90\n    }\n  }), \" Reset\")))))), /*#__PURE__*/React.createElement(CCol, {\n    sm: \"12\",\n    lg: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    open: toast,\n    autoHideDuration: 3000,\n    onClose: () => {\n      showToast(false);\n      toast ? getCategoryList() : showToast(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    severity: toastClass,\n    action: /*#__PURE__*/React.createElement(CButton, {\n      onClick: e => {\n        e.preventDefault();\n        showToast(false);\n        getCategoryList();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CIcon, {\n      name: \"cil-x\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 106\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 13\n    }\n  }, toastMessage)))));\n}","map":{"version":3,"sources":["D:/CSH/A/IoT/Web/Training/trainingapp/web/src/modules/courses/Categories.jsx"],"names":["React","Component","useEffect","CButton","CCard","CCardBody","CCardHeader","CCardFooter","CCol","CRow","CDataTable","CForm","CFormGroup","CFormText","CLink","CInput","CLabel","CSelect","CInputGroup","CInputGroupPrepend","CInputGroupText","useSelector","NavLink","RouterLink","Route","useHistory","MuiAlert","Snackbar","CIcon","axios","Config","Alert","props","Categories","useState","history","loginUser","setLoginUser","currentPage","setCurrentPage","currentPagination","setCurrentPagination","getLastVal","categoryList","length","fields","key","label","_style","width","sorter","filter","adminid","setAdminId","isAddCategory","setIsAddCategory","editId","setEditId","toast","showToast","toastMessage","setToastMessage","toastClass","setToastClass","isLoading","setIsLoading","setCategoryList","categoryName","setCategoryName","localStorage","getItem","JSON","parse","console","log","stringify","userId","userrole","push","getCategoryList","getUser","email","url","BACKEND_API_URL","method","headers","then","response","data","catch","error","list","sort","a","b","createdtime","deleteCategory","item","categoryid","deletedby","deletedtime","Date","now","toString","editCategory","categoryname","handleReset","handleSubmit","event","preventDefault","createdby","updatedby","updatedtime","doubleArrows","align","val","display","justifyContent","textAlign","e","alignSelf","marginTop","marginRight","target","value","vertical","horizontal"],"mappings":"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","sourcesContent":["import React, { Component, useEffect } from 'react'\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCardFooter,\r\n  CCol,\r\n  CRow, CDataTable, CForm, CFormGroup, CFormText, CLink, CInput, CLabel, CSelect,\r\n  CInputGroup,\r\n  CInputGroupPrepend,\r\n  CInputGroupText,\r\n} from '@coreui/react';\r\n\r\nimport { useSelector } from 'react-redux';\r\nimport { NavLink as RouterLink, Route, useHistory } from \"react-router-dom\";\r\n\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\n\r\nimport CIcon from '@coreui/icons-react'\r\nimport axios from 'axios';\r\nimport Config from '../../common/Config'\r\n\r\nfunction Alert(props) {\r\n  return <MuiAlert elevation={6} {...props} />;\r\n}\r\n\r\nexport default function Categories() {\r\n  const { useState } = React;\r\n  const history = useHistory();\r\n  // const loginUser = useSelector(state => state.loginUser);\r\n  const [loginUser, setLoginUser] = useState({})\r\n\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [currentPagination, setCurrentPagination] = useState(5)\r\n  const getLastVal = (currentPage) => {\r\n    if (currentPage * currentPagination < categoryList.length)\r\n      return currentPage * currentPagination;\r\n    return categoryList.length;\r\n  }\r\n  const fields = [\r\n    { key: 'categoryname', label:'Category Name', _style: { width: '70%' } },\r\n    {\r\n      key: 'actions',\r\n      label: '',\r\n      _style: { width: '100px' },\r\n      sorter: false,\r\n      filter: false\r\n    },\r\n  ]\r\n\r\n  const [adminid, setAdminId] = React.useState(\"adminid\")\r\n\r\n  const [isAddCategory, setIsAddCategory] = useState(true)\r\n  const [editId, setEditId] = useState(-1)\r\n\r\n  const [toast, showToast] = React.useState(false);\r\n  const [toastMessage, setToastMessage] = React.useState('');\r\n  const [toastClass, setToastClass] = React.useState('success');\r\n\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n  const [categoryList, setCategoryList] = React.useState([])\r\n  const [categoryName, setCategoryName] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    if(localStorage.getItem('loginUser')) {\r\n      var loginUser = JSON.parse(localStorage.getItem('loginUser'))\r\n      setLoginUser(loginUser)\r\n      console.log('loginUser2 ===> ' + JSON.stringify(loginUser));\r\n      setAdminId(loginUser.userId)\r\n      if(loginUser.userrole !== 'Admin') {\r\n        history.push('/');\r\n      }\r\n    } else {\r\n      history.push('/auth/login-page');\r\n    }\r\n\r\n    // if(loginUser) {\r\n    //   console.log(loginUser)\r\n    //   setAdminId(loginUser.userId)\r\n    //   // getUser(loginUser.email)\r\n    // }\r\n    getCategoryList();\r\n  }, []);\r\n\r\n  const getUser = async (email) => {\r\n    setIsLoading(true)\r\n    axios({\r\n      url: Config.BACKEND_API_URL+'/admin/user/details',\r\n      method: 'get' ,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'user-email': email\r\n      }\r\n    })\r\n    .then(function (response) {\r\n      console.log(response.data)\r\n      setAdminId(response.data.userId)\r\n      setIsLoading(false)\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      setIsLoading(false)\r\n     });\r\n\r\n  };\r\n\r\n  const getCategoryList = async () => {\r\n    setIsLoading(true)\r\n    axios({\r\n      url: Config.BACKEND_API_URL+'/admin/category/list',\r\n      method: 'get'\r\n    })\r\n    .then(function (response) {\r\n      const list = response.data.sort((a, b) => a.createdtime > b.createdtime ? 1 : -1)\r\n      setCategoryList(list);\r\n      console.log(list)\r\n      setIsLoading(false)\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      // error.response.data\r\n      setIsLoading(false)\r\n     });\r\n\r\n  };\r\n\r\n  const deleteCategory = (item) => {\r\n    // console.log(item)\r\n    // categoryid, deletedby, deletedtime\r\n    // handleReset()\r\n    setIsAddCategory(true)\r\n    setEditId(-1)\r\n\r\n    setIsLoading(true)\r\n    axios({\r\n      url: Config.BACKEND_API_URL+'/admin/category/delete',\r\n      method: 'delete',\r\n      data: {\r\n        categoryid: item.categoryid,\r\n        deletedby:adminid,\r\n        deletedtime:Date.now().toString()\r\n      },\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(function (response) {\r\n      setToastClass('success');\r\n      setToastMessage('Success: ' + response.data);\r\n      showToast(true);\r\n      setIsLoading(false)\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      // error.response.data\r\n      setIsLoading(false)\r\n     });\r\n  }\r\n\r\n  const editCategory = (item) => {\r\n    // document.getElementById('categoryname-input').value = item.categoryname;\r\n    setIsAddCategory(false)\r\n    setEditId(item.categoryid)\r\n    setCategoryName(item.categoryname)\r\n  }\r\n\r\n  const handleReset = () => {\r\n    setCategoryName('')\r\n    setIsAddCategory(true)\r\n    setEditId(-1)\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    setIsLoading(true)\r\n    if(editId === -1) {\r\n      axios({\r\n        url: Config.BACKEND_API_URL+'/admin/category/create',\r\n        method: 'post',\r\n        data: {\r\n          categoryname: categoryName,\r\n          createdby: adminid,\r\n          createdtime: Date.now().toString()\r\n        },\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n      .then(function (response) {\r\n        setToastClass('success');\r\n        setToastMessage('Success: ' + response.data);\r\n        showToast(true);\r\n\r\n        setCategoryName('');\r\n        setIsLoading(false)\r\n        handleReset()\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error.response)\r\n        setToastClass('Warning');\r\n        setToastMessage('Warning: ' + error.response.data);\r\n        showToast(true);\r\n\r\n        setIsLoading(false)\r\n      });\r\n    } else {\r\n      axios({\r\n        url: Config.BACKEND_API_URL+'/admin/category/create',\r\n        method: 'post',\r\n        data: {\r\n          categoryid:editId,\r\n          categoryname: categoryName,\r\n          updatedby:adminid,\r\n          updatedtime:Date.now().toString()\r\n        },\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n      .then(function (response) {\r\n        setToastClass('success');\r\n        setToastMessage('Success: ' + response.data);\r\n        showToast(true);\r\n\r\n        setCategoryName('');\r\n        setIsLoading(false)\r\n        handleReset()\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error.response)\r\n        setToastClass('Warning');\r\n        setToastMessage('Warning: ' + error.response.data);\r\n        showToast(true);\r\n\r\n        setIsLoading(false)\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"animated fadeIn\">\r\n      <CRow>\r\n        <CCol xl=\"6\">\r\n          <CCard custom>\r\n            <CCardHeader >\r\n              Categories\r\n            </CCardHeader>\r\n            <CCardBody>\r\n              <CDataTable\r\n                items={categoryList}\r\n                fields={fields}\r\n                // columnFilter\r\n                tableFilter\r\n                // footer\r\n                itemsPerPageSelect={false}\r\n                itemsPerPage={currentPagination}\r\n                dark={false}\r\n                hover={false}\r\n                border={false}\r\n                outlined={false}\r\n                loading={false}\r\n                sorter={false}\r\n                // clickableRows\r\n                pagination={{ doubleArrows: true, align: 'center' }}\r\n                loading={isLoading}\r\n                // onRowClick={(item,index,col,e) => {console.log(item,index,col,e)}}\r\n                onPageChange={(val) => {\r\n                  setCurrentPage(val)\r\n                }\r\n                }\r\n                // onPagesChange={(val) => console.log('new pages:', val)}\r\n                onPaginationChange={(val) => {\r\n                  setCurrentPagination(val);\r\n                }}\r\n                // onFilteredItemsChange={(val) => console.log('new filtered items:', val)}\r\n                // onSorterValueChange={(val) => console.log('new sorter value:', val)}\r\n                // onTableFilterChange={(val) => console.log('new table filter:', val)}\r\n                // onColumnFilterChange={(val) => console.log('new column filter:', val)}\r\n                scopedSlots={{\r\n                  'actions':\r\n                    item => {\r\n                      return (\r\n                        <td className=\"py-2\" style={{display:'flex',justifyContent: 'flex-end',textAlign:'right'}}>\r\n                          {\r\n                              editId != item.categoryid ?\r\n                              <CButton size=\"sm\" color=\"info\" onClick={(e) => { e.preventDefault(); editCategory(item) }}>Edit</CButton>\r\n                              : <CButton size=\"sm\" color=\"info\" disabled>Edit</CButton>\r\n                          }\r\n                          <CButton size=\"sm\" color=\"danger\" className=\"ml-1\" onClick={(e) => { e.preventDefault(); deleteCategory(item) }}>\r\n                            Delete\r\n                          </CButton>\r\n                        </td>\r\n                      )\r\n                    }\r\n                }}\r\n              />\r\n              <CRow>\r\n                <CCol xs=\"9\" md=\"8\" style={{alignSelf:\"center\", display:'flex'}}>\r\n                    <spin style={{marginTop:\"5px\", marginRight:\"5px\"}}>Items per page:</spin>\r\n                    <CSelect\r\n                      name=\"itemsperpage\"\r\n                      id=\"itemsperpage\"\r\n                      style={{width:\"70px\"}}\r\n                      onChange={e => setCurrentPagination(e.target.value)}\r\n                      value={currentPagination}>\r\n                      <option value=\"5\">5</option>\r\n                      <option value=\"10\">10</option>\r\n                      <option value=\"15\">15</option>\r\n                      <option value=\"20\">20</option>\r\n                    </CSelect>\r\n                </CCol>\r\n                <CCol xs=\"3\" md=\"4\" style={{alignSelf:\"center\"}}>\r\n                  <div  style={{textAlign: 'right' }}>\r\n                    <spin>\r\n                    {\r\n                     ((currentPage - 1) * currentPagination + 1) + '-' + getLastVal(currentPage) + ' of ' + categoryList.length\r\n                    }\r\n                    </spin>\r\n                  </div>\r\n                </CCol>\r\n              </CRow>\r\n            </CCardBody>\r\n          </CCard>\r\n        </CCol>\r\n        <CCol xl=\"6\">\r\n          <CCard custom>\r\n            <CCardHeader id=\"headingOne\" style={{ display: 'inline-flex' }}>\r\n              {\r\n                  isAddCategory ? 'Add Category' : 'Edit Category'\r\n              }\r\n            </CCardHeader>\r\n            <CCardBody>\r\n              <CForm onSubmit={handleSubmit} className=\"form-horizontal\" name='simpleForm'>\r\n                <CInputGroup className=\"mb-3\">\r\n                  <CInputGroupPrepend>\r\n                    <CInputGroupText>@</CInputGroupText>\r\n                  </CInputGroupPrepend>\r\n                  <CInput type=\"text\"\r\n                      label=\"Category Name\"\r\n                      name=\"categoryname-input\"\r\n                      id=\"categoryname-input\"\r\n                      placeholder=\"Category Name\"\r\n                      autoComplete=\"given-name\"\r\n                      onChange={e => setCategoryName(e.target.value) }\r\n                      value={categoryName}\r\n                      required />\r\n                </CInputGroup>\r\n                <hr/>\r\n                <div style={{width:\"150px\"}}>\r\n                  <CButton type=\"submit\" size=\"sm\" color=\"primary\" style={{marginRight:'10px'}} ><CIcon name=\"cil-save\" /> Save</CButton>\r\n                  <CButton type=\"reset\"  size=\"sm\" color=\"danger\" onClick={handleReset} ><CIcon name=\"cil-ban\" /> Reset</CButton>\r\n                </div>\r\n              </CForm>\r\n            </CCardBody>\r\n            {/* <CCardFooter>\r\n              <CButton type=\"submit\" size=\"sm\" color=\"primary\" onClick={handleSubmit}><CIcon name=\"cil-save\" /> Save</CButton>\r\n            </CCardFooter> */}\r\n          </CCard>\r\n        </CCol>\r\n        <CCol sm=\"12\" lg=\"6\">\r\n          <Snackbar\r\n            anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n            open={toast}\r\n            autoHideDuration={3000}\r\n            onClose={() => {\r\n              showToast(false);\r\n              toast ? getCategoryList() : showToast(false);\r\n            }}>\r\n            <Alert\r\n              severity={toastClass}\r\n              action={\r\n                <CButton  onClick={(e) => { e.preventDefault(); showToast(false); getCategoryList();  }}><CIcon name=\"cil-x\" /></CButton>\r\n              }\r\n            >\r\n              {toastMessage}\r\n            </Alert>\r\n          </Snackbar>\r\n        </CCol>\r\n      </CRow>\r\n    </div>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}