{"ast":null,"code":"var _jsxFileName = \"D:\\\\CSH\\\\A\\\\IoT\\\\Web\\\\Training\\\\trainingapp\\\\web\\\\src\\\\modules\\\\courses\\\\Topics.jsx\";\nimport React, { Component, useEffect } from 'react';\nimport { CButton, CCard, CCardBody, CCardHeader, CCardFooter, CCol, CRow, CDataTable, CForm, CFormGroup, CFormText, CLink, CInput, CLabel, CSelect, CSpinner, CInputFile, CInputGroup, CInputGroupPrepend, CInputGroupText, CTextarea } from '@coreui/react';\nimport ReactQuill from 'react-quill';\nimport 'quill/dist/quill.snow.css';\nimport { useSelector } from 'react-redux';\nimport { NavLink as RouterLink, Route, useHistory } from \"react-router-dom\";\nimport MuiAlert from '@material-ui/lab/Alert';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport AttachFile from '@material-ui/icons/AttachFile';\nimport VideoLibraryIcon from '@material-ui/icons/VideoLibrary';\nimport Fade from '@material-ui/core/Fade';\nimport ReactPlayer from 'react-player';\nimport S3 from \"react-aws-s3\";\nimport CIcon from '@coreui/icons-react';\nimport axios from 'axios';\nimport Config from '../../common/Config';\n\nfunction Alert(props) {\n  return /*#__PURE__*/React.createElement(MuiAlert, Object.assign({\n    elevation: 6\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 10\n    }\n  }));\n}\n\nexport default function Topics(props) {\n  const {\n    useState\n  } = React;\n  const history = useHistory();\n  const modules = {\n    toolbar: [['bold', 'italic', 'underline', 'strike'], // toggled buttons\n    ['blockquote', 'code-block'], [{\n      'header': 1\n    }, {\n      'header': 2\n    }], // custom button values\n    [{\n      'list': 'ordered'\n    }, {\n      'list': 'bullet'\n    }], [{\n      'script': 'sub'\n    }, {\n      'script': 'super'\n    }], // superscript/subscript\n    [{\n      'indent': '-1'\n    }, {\n      'indent': '+1'\n    }], // outdent/indent\n    [{\n      'direction': 'rtl'\n    }], // text direction\n    [{\n      'size': ['small', false, 'large', 'huge']\n    }], // custom dropdown\n    [{\n      'header': [1, 2, 3, 4, 5, 6, false]\n    }], [{\n      'color': []\n    }, {\n      'background': []\n    }], // dropdown with defaults from theme\n    [{\n      'font': []\n    }], [{\n      'align': []\n    }], ['clean'] // remove formatting button\n    ]\n  }; // const loginUser = useSelector(state => state.loginUser);\n\n  const [loginUser, setLoginUser] = useState({});\n  const [currentPage, setCurrentPage] = useState(1);\n  const [currentPagination, setCurrentPagination] = useState(5);\n\n  const getLastVal = currentPage => {\n    if (currentPage * currentPagination < topicList.length) return currentPage * currentPagination;\n    return topicList.length;\n  };\n\n  const fields = [{\n    key: 'topicname',\n    label: 'Topic Name',\n    _style: {\n      width: '70%'\n    }\n  }, {\n    key: 'actions',\n    label: '',\n    _style: {\n      width: '100px'\n    },\n    sorter: false,\n    filter: false\n  }];\n  const [adminid, setAdminId] = React.useState(\"adminid\");\n  const [isAdd, setIsAdd] = useState(true);\n  const [editId, setEditId] = useState(-1);\n  const [toast, showToast] = React.useState(false);\n  const [toastMessage, setToastMessage] = React.useState('');\n  const [toastClass, setToastClass] = React.useState('success');\n  const [video, setVideo] = React.useState(null);\n  const [videoHeight, setVideoHeight] = React.useState('0px');\n  const [loading, setLoading] = React.useState(false);\n  const [section, setSection] = React.useState({});\n  const [topicList, setTopicList] = React.useState([]);\n  const [videoLoading, setVideoLoading] = React.useState(false);\n  const [fileLoading, setFileLoading] = React.useState(false);\n  const [topicName, setTopicName] = React.useState('');\n  const [content, setContent] = React.useState('');\n  const [videoFile, setVideoFile] = React.useState('');\n  const [uploadedFile, setUploadedFile] = React.useState('');\n  const [videoClicked, setVideoClicked] = React.useState(false); //topicid(S),  sectionid(S),  topicname(S),  videofile(S),  content(S),  uploadedfile(S), createdby(S), createdtime(S),  updatedby(S),  updatedtime(S) ,  deletedby(S),deletedtime(S)\n\n  React.useEffect(() => {\n    if (localStorage.getItem('loginUser')) {\n      var loginUser = JSON.parse(localStorage.getItem('loginUser'));\n      setLoginUser(loginUser);\n      console.log('loginUser2 ===> ' + JSON.stringify(loginUser));\n      setAdminId(loginUser.userId);\n\n      if (loginUser.userrole !== 'admin') {\n        history.push('/');\n      }\n    } else {\n      history.push('/auth/login-page');\n    }\n\n    getSectionList();\n  }, []);\n\n  const getUser = async email => {\n    setLoading(true);\n    axios({\n      url: Config.BACKEND_API_URL + '/user',\n      method: 'get',\n      headers: {\n        'Content-Type': 'application/json',\n        'user-email': email\n      }\n    }).then(function (response) {\n      console.log(response.data);\n      setAdminId(response.data.userId);\n      setLoading(false);\n    }).catch(function (error) {\n      console.log(error.response);\n      setLoading(false);\n    });\n  };\n\n  const getSectionList = async () => {\n    console.log(process.env.REACT_APP_AWS_ASSETS_BUCKET);\n    setLoading(true);\n    const cList = await axios({\n      url: Config.BACKEND_API_URL + '/section',\n      method: 'get'\n    }).then(function (response) {\n      const list = response.data.sort((a, b) => a.createdtime > b.createdtime ? 1 : -1); //Ascending\n\n      console.log(list);\n      setLoading(false);\n      return list;\n    }).catch(function (error) {\n      console.log(error.response);\n      setLoading(false);\n    });\n\n    if (cList) {\n      const cc = cList.find(section => section.sectionid === props.match.params.id);\n      setSection(cc);\n    }\n\n    getTopicList();\n  };\n\n  const getTopicList = async () => {\n    setLoading(true);\n    axios({\n      url: Config.BACKEND_API_URL + '/topic',\n      method: 'get'\n    }).then(function (response) {\n      const list = response.data.sort((a, b) => a.createdtime > b.createdtime ? 1 : -1); //Ascending\n\n      console.log(list);\n      setTopicList(list.filter(topic => topic.sectionid === props.match.params.id));\n      setLoading(false);\n    }).catch(function (error) {\n      console.log(error.response);\n      setLoading(false);\n    });\n  };\n\n  const deleteTopic = item => {\n    // console.log(item)\n    setIsAdd(true);\n    setEditId(-1);\n    setLoading(true);\n    axios({\n      url: Config.BACKEND_API_URL + '/topic',\n      method: 'delete',\n      data: {\n        topicid: item.topicid.toString(),\n        deletedby: adminid,\n        deletedtime: Date.now().toString()\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      setToastClass('success');\n      setToastMessage('Success: ' + response.data);\n      showToast(true);\n      setLoading(false);\n    }).catch(function (error) {\n      console.log(error.response); // error.response.data\n\n      setLoading(false);\n    });\n  };\n\n  const editTopic = item => {\n    setIsAdd(false);\n    setEditId(item.topicid);\n    setTopicName(item.topicname);\n    if (item.videofile === \"null\") setVideoFile('');else setVideoFile(item.videofile);\n    if (item.content === \"null\") setContent('');else setContent(item.content);\n    if (item.uploadedfile === \"null\") setUploadedFile('');else setUploadedFile(item.uploadedfile);\n    setVideoClicked(false);\n\n    if (item.videofile !== \"null\") {\n      setVideo(process.env.REACT_APP_AWS_BUCKET_CLOUDFRONT_URL + '/' + item.videofile);\n    }\n  };\n\n  const handleReset = () => {\n    setTopicName('');\n    setVideoFile('');\n    setContent('');\n    console.log(\"uploadedfile:\" + uploadedFile);\n    setUploadedFile('');\n    setVideoClicked(false);\n    setVideo(null);\n    setIsAdd(true);\n    setEditId(-1);\n  };\n\n  function setFileThumbnail(event) {\n    event.preventDefault();\n    setFileLoading(true);\n    let file = event.target.files[0]; // setUploadedFile(URL.createObjectURL(file));\n\n    console.log(\"setFiieThumbnail:\" + file);\n    fileUpload(file);\n  }\n\n  ;\n\n  function fileUpload(file) {\n    let fileName = Date.now().toString();\n    const config = {\n      bucketName: process.env.REACT_APP_AWS_ASSETS_BUCKET,\n      region: process.env.REACT_APP_AWS_REGION,\n      accessKeyId: process.env.REACT_APP_AWS_ACCESS_KEY,\n      secretAccessKey: process.env.REACT_APP_AWS_SECRET_ACCESS_KEY\n    };\n    const ReactS3Client = new S3(config);\n    ReactS3Client.uploadFile(file, fileName).then(data => {\n      if (data.status === 204) {\n        setUploadedFile(data.key);\n        setFileLoading(false);\n      } else {\n        console.log(data);\n      }\n    });\n  }\n\n  ;\n\n  function setVideoThumbnail(event) {\n    event.preventDefault();\n    setVideoClicked(false);\n    setVideoLoading(true);\n    let file = event.target.files[0];\n    setVideo(URL.createObjectURL(file));\n    videoUpload(file);\n  }\n\n  ;\n\n  function videoUpload(file) {\n    let fileName = Date.now().toString();\n    const config = {\n      bucketName: process.env.REACT_APP_AWS_ASSETS_BUCKET,\n      region: process.env.REACT_APP_AWS_REGION,\n      accessKeyId: process.env.REACT_APP_AWS_ACCESS_KEY,\n      secretAccessKey: process.env.REACT_APP_AWS_SECRET_ACCESS_KEY\n    };\n    const ReactS3Client = new S3(config);\n    ReactS3Client.uploadFile(file, fileName).then(data => {\n      if (data.status === 204) {\n        setVideoFile(data.key);\n        setVideoHeight(\"125px\");\n        setVideoLoading(false);\n      } else {\n        console.log(data);\n      }\n    });\n  }\n\n  ;\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    setLoading(true);\n\n    if (editId === -1) {\n      axios({\n        url: Config.BACKEND_API_URL + '/topic',\n        method: 'post',\n        data: {\n          sectionid: props.match.params.id,\n          topicname: topicName,\n          createdby: adminid,\n          videofile: videoFile,\n          content: content,\n          uploadedfile: uploadedFile,\n          createdby: adminid,\n          createdtime: Date.now().toString()\n        },\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        setToastClass('success');\n        setToastMessage('Success: ' + response.data);\n        showToast(true);\n        setLoading(false);\n        handleReset();\n      }).catch(function (error) {\n        console.log(error.response);\n        setToastClass('Warning');\n        setToastMessage('Warning: ' + error.response.data);\n        showToast(true);\n        setLoading(false);\n      });\n    } else {\n      console.log(\"topicid:\" + editId);\n      console.log(\"topicname:\" + topicName);\n      axios({\n        url: Config.BACKEND_API_URL + '/topic',\n        method: 'post',\n        data: {\n          topicid: editId.toString(),\n          sectionid: props.match.params.id,\n          topicname: topicName,\n          createdby: adminid,\n          videofile: videoFile,\n          content: content,\n          uploadedfile: uploadedFile,\n          updatedby: adminid,\n          updatedtime: Date.now().toString()\n        },\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        setToastClass('success');\n        setToastMessage('Success: ' + response.data);\n        showToast(true);\n        setLoading(false);\n        handleReset();\n      }).catch(function (error) {\n        console.log(error.response);\n        setToastClass('Warning');\n        setToastMessage('Warning: ' + error.response.data);\n        showToast(true);\n        setLoading(false);\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"animated fadeIn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    xl: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CCard, {\n    custom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CCardHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 15\n    }\n  }, \"Topics \"), \" \", section ? '( Section: ' + section.sectionname + ')' : ''), /*#__PURE__*/React.createElement(CCardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CDataTable, {\n    items: topicList,\n    fields: fields // columnFilter\n    ,\n    tableFilter: true // footer\n    ,\n    itemsPerPageSelect: false,\n    itemsPerPage: currentPagination,\n    dark: false,\n    hover: false,\n    border: false,\n    outlined: false,\n    loading: false,\n    sorter: false // clickableRows\n    ,\n    pagination: {\n      doubleArrows: true,\n      align: 'center'\n    },\n    loading: loading // onRowClick={(item,index,col,e) => {console.log(item,index,col,e)}}\n    ,\n    onPageChange: val => {\n      setCurrentPage(val);\n    } // onPagesChange={(val) => console.log('new pages:', val)}\n    ,\n    onPaginationChange: val => {\n      setCurrentPagination(val);\n    } // onFilteredItemsChange={(val) => console.log('new filtered items:', val)}\n    // onSorterValueChange={(val) => console.log('new sorter value:', val)}\n    // onTableFilterChange={(val) => console.log('new table filter:', val)}\n    // onColumnFilterChange={(val) => console.log('new column filter:', val)}\n    ,\n    scopedSlots: {\n      'actions': item => {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          className: \"py-2\",\n          style: {\n            display: 'flex',\n            justifyContent: 'flex-end',\n            textAlign: 'right'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 25\n          }\n        }, editId != item.topicid ? /*#__PURE__*/React.createElement(CButton, {\n          size: \"sm\",\n          color: \"info\",\n          onClick: e => {\n            e.preventDefault();\n            editTopic(item);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 31\n          }\n        }, \"Edit\") : /*#__PURE__*/React.createElement(CButton, {\n          size: \"sm\",\n          color: \"info\",\n          disabled: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 33\n          }\n        }, \"Edit\"), /*#__PURE__*/React.createElement(CButton, {\n          size: \"sm\",\n          color: \"danger\",\n          className: \"ml-1\",\n          onClick: e => {\n            e.preventDefault();\n            deleteTopic(item);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 27\n          }\n        }, \"Delete\"));\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(CRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    xs: \"9\",\n    md: \"8\",\n    style: {\n      alignSelf: \"center\",\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"spin\", {\n    style: {\n      marginTop: \"5px\",\n      marginRight: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 21\n    }\n  }, \"Items per page:\"), /*#__PURE__*/React.createElement(CSelect, {\n    name: \"itemsperpage\",\n    id: \"itemsperpage\",\n    style: {\n      width: \"70px\"\n    },\n    onChange: e => setCurrentPagination(e.target.value),\n    value: currentPagination,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 23\n    }\n  }, \"5\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 23\n    }\n  }, \"10\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 23\n    }\n  }, \"15\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 23\n    }\n  }, \"20\"))), /*#__PURE__*/React.createElement(CCol, {\n    xs: \"3\",\n    md: \"4\",\n    style: {\n      alignSelf: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'right'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"spin\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 21\n    }\n  }, (currentPage - 1) * currentPagination + 1 + '-' + getLastVal(currentPage) + ' of ' + topicList.length))))))), /*#__PURE__*/React.createElement(CCol, {\n    xl: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CCard, {\n    custom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CCardHeader, {\n    id: \"headingOne\",\n    style: {\n      display: 'inline-flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 13\n    }\n  }, isAdd ? 'Add Topic' : 'Edit Topic'), /*#__PURE__*/React.createElement(CCardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CForm, {\n    onSubmit: handleSubmit,\n    className: \"form-horizontal\",\n    name: \"simpleForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CInputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CInputGroupPrepend, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(CInputGroupText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 21\n    }\n  }, \"@\")), /*#__PURE__*/React.createElement(CInput, {\n    type: \"text\",\n    label: \"Topic Name\",\n    name: \"topicname-input\",\n    id: \"topicname-input\",\n    placeholder: \"Topic Name\",\n    autoComplete: \"given-name\",\n    onChange: e => setTopicName(e.target.value),\n    value: topicName,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(ReactQuill, {\n    name: \"content\",\n    id: \"content\",\n    placeholder: \"Contents\",\n    value: content,\n    modules: modules,\n    onChange: setContent,\n    style: {\n      marginBottom: \"10px\"\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(CRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    xs: \"7\",\n    xl: \"6\",\n    md: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    class: \"btn btn-primary btn-sm\",\n    variant: \"contained\",\n    component: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AttachFile, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 25\n    }\n  }), \" \\xA0Upload File\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"*/*\",\n    style: {\n      display: \"none\"\n    },\n    onChange: setFileThumbnail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Fade, {\n    in: fileLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(CSpinner, {\n    grow: true,\n    color: \"primary\",\n    style: {\n      marginLeft: 10,\n      marginTop: 5,\n      width: 20,\n      height: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 44\n    }\n  }))), /*#__PURE__*/React.createElement(CCol, {\n    xs: \"5\",\n    xl: \"6\",\n    md: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 19\n    }\n  }, uploadedFile)), /*#__PURE__*/React.createElement(CRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    xs: \"7\",\n    xl: \"6\",\n    md: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    class: \"btn btn-primary btn-sm\",\n    variant: \"contained\",\n    component: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(VideoLibraryIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 25\n    }\n  }), \" \\xA0 Upload Video\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"video/*\",\n    style: {\n      display: \"none\"\n    },\n    onChange: setVideoThumbnail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Fade, {\n    in: videoLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(CSpinner, {\n    grow: true,\n    color: \"primary\",\n    style: {\n      marginLeft: 10,\n      marginTop: 5,\n      width: 20,\n      height: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(CCol, {\n    xs: \"5\",\n    xl: \"6\",\n    md: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      cursor: \"pointer\",\n      color: \"#321fdb\"\n    },\n    onClick: e => {\n      e.preventDefault();\n      setVideoClicked(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 21\n    }\n  }, videoFile))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"150px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CButton, {\n    type: \"submit\",\n    size: \"sm\",\n    color: \"primary\",\n    style: {\n      marginRight: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(CIcon, {\n    name: \"cil-save\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 97\n    }\n  }), \" Save\"), /*#__PURE__*/React.createElement(CButton, {\n    type: \"reset\",\n    size: \"sm\",\n    color: \"danger\",\n    onClick: handleReset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(CIcon, {\n    name: \"cil-ban\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 90\n    }\n  }), \" Reset\")), videoClicked && video != null ? /*#__PURE__*/React.createElement(CRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    xs: \"12\",\n    md: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(CCardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ReactPlayer, {\n    config: {\n      file: {\n        attributes: {\n          controlsList: 'nodownload'\n        }\n      }\n    },\n    onContextMenu: e => e.preventDefault(),\n    controls: true,\n    width: \"250\",\n    height: \"125\",\n    url: video,\n    style: {\n      height: `${videoHeight}`,\n      backgroundRepeat: 'no-repeat',\n      backgroundPosition: 'center',\n      marginTop: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 555,\n      columnNumber: 27\n    }\n  })))) : \"\")))), /*#__PURE__*/React.createElement(CCol, {\n    sm: \"12\",\n    lg: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 576,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    open: toast,\n    autoHideDuration: 3000,\n    onClose: () => {\n      showToast(false);\n      toast ? getSectionList() : showToast(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    severity: toastClass,\n    action: /*#__PURE__*/React.createElement(CButton, {\n      onClick: e => {\n        e.preventDefault();\n        showToast(false);\n        getSectionList();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CIcon, {\n      name: \"cil-x\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 105\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 13\n    }\n  }, toastMessage)))));\n}","map":{"version":3,"sources":["D:/CSH/A/IoT/Web/Training/trainingapp/web/src/modules/courses/Topics.jsx"],"names":["React","Component","useEffect","CButton","CCard","CCardBody","CCardHeader","CCardFooter","CCol","CRow","CDataTable","CForm","CFormGroup","CFormText","CLink","CInput","CLabel","CSelect","CSpinner","CInputFile","CInputGroup","CInputGroupPrepend","CInputGroupText","CTextarea","ReactQuill","useSelector","NavLink","RouterLink","Route","useHistory","MuiAlert","Snackbar","Button","AttachFile","VideoLibraryIcon","Fade","ReactPlayer","S3","CIcon","axios","Config","Alert","props","Topics","useState","history","modules","toolbar","loginUser","setLoginUser","currentPage","setCurrentPage","currentPagination","setCurrentPagination","getLastVal","topicList","length","fields","key","label","_style","width","sorter","filter","adminid","setAdminId","isAdd","setIsAdd","editId","setEditId","toast","showToast","toastMessage","setToastMessage","toastClass","setToastClass","video","setVideo","videoHeight","setVideoHeight","loading","setLoading","section","setSection","setTopicList","videoLoading","setVideoLoading","fileLoading","setFileLoading","topicName","setTopicName","content","setContent","videoFile","setVideoFile","uploadedFile","setUploadedFile","videoClicked","setVideoClicked","localStorage","getItem","JSON","parse","console","log","stringify","userId","userrole","push","getSectionList","getUser","email","url","BACKEND_API_URL","method","headers","then","response","data","catch","error","process","env","REACT_APP_AWS_ASSETS_BUCKET","cList","list","sort","a","b","createdtime","cc","find","sectionid","match","params","id","getTopicList","topic","deleteTopic","item","topicid","toString","deletedby","deletedtime","Date","now","editTopic","topicname","videofile","uploadedfile","REACT_APP_AWS_BUCKET_CLOUDFRONT_URL","handleReset","setFileThumbnail","event","preventDefault","file","target","files","fileUpload","fileName","config","bucketName","region","REACT_APP_AWS_REGION","accessKeyId","REACT_APP_AWS_ACCESS_KEY","secretAccessKey","REACT_APP_AWS_SECRET_ACCESS_KEY","ReactS3Client","uploadFile","status","setVideoThumbnail","URL","createObjectURL","videoUpload","handleSubmit","createdby","updatedby","updatedtime","sectionname","doubleArrows","align","val","display","justifyContent","textAlign","e","alignSelf","marginTop","marginRight","value","marginBottom","marginLeft","height","cursor","color","attributes","controlsList","backgroundRepeat","backgroundPosition","vertical","horizontal"],"mappings":"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","sourcesContent":["import React, { Component, useEffect } from 'react'\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCardFooter,\r\n  CCol,\r\n  CRow, CDataTable, CForm, CFormGroup, CFormText, CLink, CInput, CLabel, CSelect,CSpinner,\r\n  CInputFile,\r\n  CInputGroup,\r\n  CInputGroupPrepend,\r\n  CInputGroupText,\r\n  CTextarea\r\n} from '@coreui/react';\r\n\r\nimport ReactQuill from 'react-quill'\r\nimport 'quill/dist/quill.snow.css'\r\n\r\nimport { useSelector } from 'react-redux';\r\nimport { NavLink as RouterLink, Route, useHistory } from \"react-router-dom\";\r\n\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport AttachFile from '@material-ui/icons/AttachFile';\r\nimport VideoLibraryIcon from '@material-ui/icons/VideoLibrary';\r\nimport Fade from '@material-ui/core/Fade';\r\n\r\nimport ReactPlayer from 'react-player';\r\nimport S3 from \"react-aws-s3\";\r\n\r\nimport CIcon from '@coreui/icons-react'\r\nimport axios from 'axios';\r\nimport Config from '../../common/Config'\r\n\r\nfunction Alert(props) {\r\n  return <MuiAlert elevation={6} {...props} />;\r\n}\r\n\r\nexport default function Topics(props) {\r\n  const { useState } = React;\r\n  const history = useHistory();\r\n\r\n  const modules = {\r\n    toolbar: [\r\n      ['bold', 'italic', 'underline', 'strike'],        // toggled buttons\r\n      ['blockquote', 'code-block'],\r\n      [{ 'header': 1 }, { 'header': 2 }],               // custom button values\r\n      [{ 'list': 'ordered'}, { 'list': 'bullet' }],\r\n      [{ 'script': 'sub'}, { 'script': 'super' }],      // superscript/subscript\r\n      [{ 'indent': '-1'}, { 'indent': '+1' }],          // outdent/indent\r\n      [{ 'direction': 'rtl' }],                         // text direction\r\n      [{ 'size': ['small', false, 'large', 'huge'] }],  // custom dropdown\r\n      [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\r\n      [{ 'color': [] }, { 'background': [] }],          // dropdown with defaults from theme\r\n      [{ 'font': [] }],\r\n      [{ 'align': [] }],\r\n      ['clean']                                         // remove formatting button\r\n    ]\r\n  }\r\n  \r\n  // const loginUser = useSelector(state => state.loginUser);\r\n  const [loginUser, setLoginUser] = useState({})\r\n\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [currentPagination, setCurrentPagination] = useState(5)\r\n  const getLastVal = (currentPage) => {\r\n    if (currentPage * currentPagination < topicList.length)\r\n      return currentPage * currentPagination;\r\n    return topicList.length;\r\n  }\r\n  const fields = [\r\n    { key: 'topicname', label:'Topic Name', _style: { width: '70%' } },\r\n    {\r\n      key: 'actions',\r\n      label: '',\r\n      _style: { width: '100px' },\r\n      sorter: false,\r\n      filter: false\r\n    },\r\n  ]\r\n\r\n  const [adminid, setAdminId] = React.useState(\"adminid\")\r\n\r\n  const [isAdd, setIsAdd] = useState(true)\r\n  const [editId, setEditId] = useState(-1)\r\n\r\n  const [toast, showToast] = React.useState(false);\r\n  const [toastMessage, setToastMessage] = React.useState('');\r\n  const [toastClass, setToastClass] = React.useState('success');\r\n\r\n  const [video, setVideo] = React.useState(null);\r\n  const [videoHeight, setVideoHeight] = React.useState('0px');\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [section, setSection] = React.useState({})\r\n  const [topicList, setTopicList] = React.useState([])\r\n\r\n  const [videoLoading, setVideoLoading] = React.useState(false);\r\n  const [fileLoading, setFileLoading] = React.useState(false);\r\n  const [topicName, setTopicName] = React.useState('');\r\n  const [content, setContent] = React.useState('');\r\n  const [videoFile, setVideoFile] = React.useState('');\r\n  const [uploadedFile, setUploadedFile] = React.useState('');\r\n\r\n  const [videoClicked, setVideoClicked] = React.useState(false);\r\n\r\n  //topicid(S),  sectionid(S),  topicname(S),  videofile(S),  content(S),  uploadedfile(S), createdby(S), createdtime(S),  updatedby(S),  updatedtime(S) ,  deletedby(S),deletedtime(S)\r\n  React.useEffect(() => {\r\n    if(localStorage.getItem('loginUser')) {\r\n      var loginUser = JSON.parse(localStorage.getItem('loginUser'))\r\n      setLoginUser(loginUser)\r\n      console.log('loginUser2 ===> ' + JSON.stringify(loginUser));\r\n      setAdminId(loginUser.userId);\r\n      if(loginUser.userrole !== 'admin') {\r\n        history.push('/');\r\n      }\r\n    } else {\r\n      history.push('/auth/login-page');\r\n    }\r\n\r\n    getSectionList();\r\n  }, []);\r\n\r\n  const getUser = async (email) => {\r\n    setLoading(true)\r\n    axios({\r\n      url: Config.BACKEND_API_URL+'/user',\r\n      method: 'get' ,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'user-email': email\r\n      }\r\n    })\r\n    .then(function (response) {\r\n      console.log(response.data)\r\n      setAdminId(response.data.userId)\r\n      setLoading(false)\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      setLoading(false)\r\n     });\r\n\r\n  };\r\n\r\n  const getSectionList = async () => {\r\n    console.log(process.env.REACT_APP_AWS_ASSETS_BUCKET)\r\n    setLoading(true)\r\n    const cList = await axios({\r\n      url: Config.BACKEND_API_URL+'/section',\r\n      method: 'get'\r\n    })\r\n    .then(function (response) {\r\n      const list = response.data.sort((a, b) => a.createdtime > b.createdtime ? 1 : -1) //Ascending\r\n      console.log(list)\r\n      setLoading(false)\r\n      return list\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      setLoading(false)\r\n     });\r\n\r\n     if(cList) {\r\n      const cc = cList.find( section => section.sectionid === props.match.params.id)\r\n      setSection(cc)\r\n     }\r\n     getTopicList();\r\n  };\r\n\r\n  const getTopicList = async () => {\r\n\r\n    setLoading(true)\r\n    axios({\r\n      url: Config.BACKEND_API_URL+'/topic',\r\n      method: 'get'\r\n    })\r\n    .then(function (response) {\r\n      const list = response.data.sort((a, b) => a.createdtime > b.createdtime ? 1 : -1) //Ascending\r\n      console.log(list)\r\n      setTopicList(list.filter(topic => topic.sectionid === props.match.params.id));\r\n      setLoading(false)\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      setLoading(false)\r\n     });\r\n  };\r\n\r\n  const deleteTopic = (item) => {\r\n    // console.log(item)\r\n    setIsAdd(true)\r\n    setEditId(-1)\r\n\r\n    setLoading(true)\r\n    axios({\r\n      url: Config.BACKEND_API_URL+'/topic',\r\n      method: 'delete',\r\n      data: {\r\n        topicid: item.topicid.toString(),\r\n        deletedby:adminid,\r\n        deletedtime:Date.now().toString()\r\n      },\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(function (response) {\r\n      setToastClass('success');\r\n      setToastMessage('Success: ' + response.data);\r\n      showToast(true);\r\n      setLoading(false)\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error.response)\r\n      // error.response.data\r\n      setLoading(false)\r\n     });\r\n  }\r\n\r\n  const editTopic = (item) => {\r\n    setIsAdd(false)\r\n    setEditId(item.topicid)\r\n\r\n    setTopicName(item.topicname)\r\n    if(item.videofile === \"null\") setVideoFile('')\r\n    else setVideoFile(item.videofile)\r\n    if(item.content === \"null\") setContent('')\r\n    else setContent(item.content)\r\n    if(item.uploadedfile === \"null\") setUploadedFile('')\r\n    else setUploadedFile(item.uploadedfile)\r\n\r\n    setVideoClicked(false);\r\n    if(item.videofile !== \"null\") {\r\n      setVideo(process.env.REACT_APP_AWS_BUCKET_CLOUDFRONT_URL + '/' + item.videofile)\r\n    }\r\n\r\n  }\r\n\r\n  const handleReset = () => {\r\n    setTopicName('')\r\n    setVideoFile('')\r\n    setContent('')\r\n    console.log(\"uploadedfile:\"+ uploadedFile)\r\n    setUploadedFile('')\r\n\r\n    setVideoClicked(false)\r\n    setVideo(null)\r\n\r\n    setIsAdd(true)\r\n    setEditId(-1)\r\n  }\r\n\r\n  function setFileThumbnail(event) {\r\n    event.preventDefault();\r\n    setFileLoading(true);\r\n    let file = event.target.files[0];\r\n    // setUploadedFile(URL.createObjectURL(file));\r\n    console.log(\"setFiieThumbnail:\" + file)\r\n    fileUpload(file);\r\n  };\r\n\r\n  function fileUpload(file) {\r\n    let fileName = Date.now().toString();\r\n    const config = {\r\n      bucketName: process.env.REACT_APP_AWS_ASSETS_BUCKET,\r\n      region: process.env.REACT_APP_AWS_REGION,\r\n      accessKeyId: process.env.REACT_APP_AWS_ACCESS_KEY,\r\n      secretAccessKey: process.env.REACT_APP_AWS_SECRET_ACCESS_KEY\r\n    };\r\n    const ReactS3Client = new S3(config);\r\n    ReactS3Client.uploadFile(file, fileName).then((data) => {\r\n      if (data.status === 204) {\r\n        setUploadedFile(data.key);\r\n        setFileLoading(false);\r\n      } else {\r\n        console.log(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  function setVideoThumbnail(event) {\r\n    event.preventDefault();\r\n    setVideoClicked(false);\r\n\r\n    setVideoLoading(true);\r\n    let file = event.target.files[0];\r\n    setVideo(URL.createObjectURL(file));\r\n    videoUpload(file);\r\n  };\r\n\r\n  function videoUpload(file) {\r\n    let fileName = Date.now().toString();\r\n    const config = {\r\n      bucketName: process.env.REACT_APP_AWS_ASSETS_BUCKET,\r\n      region: process.env.REACT_APP_AWS_REGION,\r\n      accessKeyId: process.env.REACT_APP_AWS_ACCESS_KEY,\r\n      secretAccessKey: process.env.REACT_APP_AWS_SECRET_ACCESS_KEY\r\n    };\r\n    const ReactS3Client = new S3(config);\r\n    ReactS3Client.uploadFile(file, fileName).then((data) => {\r\n      if (data.status === 204) {\r\n        setVideoFile(data.key);\r\n        setVideoHeight(\"125px\");\r\n        setVideoLoading(false);\r\n      } else {\r\n        console.log(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    setLoading(true)\r\n    if(editId === -1) {\r\n      axios({\r\n        url: Config.BACKEND_API_URL+'/topic',\r\n        method: 'post',\r\n        data: {\r\n          sectionid:props.match.params.id,\r\n          topicname: topicName,\r\n          createdby: adminid,\r\n          videofile:videoFile,\r\n          content:content,\r\n          uploadedfile:uploadedFile,\r\n          createdby:adminid,\r\n          createdtime:Date.now().toString()\r\n        },\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n      .then(function (response) {\r\n        setToastClass('success');\r\n        setToastMessage('Success: ' + response.data);\r\n        showToast(true);\r\n\r\n        setLoading(false)\r\n        handleReset()\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error.response)\r\n        setToastClass('Warning');\r\n        setToastMessage('Warning: ' + error.response.data);\r\n        showToast(true);\r\n\r\n        setLoading(false)\r\n      });\r\n    } else {\r\n      console.log(\"topicid:\"+editId)\r\n      console.log(\"topicname:\"+topicName)\r\n      axios({\r\n        url: Config.BACKEND_API_URL+'/topic',\r\n        method: 'post',\r\n        data: {\r\n          topicid:editId.toString(),\r\n          sectionid:props.match.params.id,\r\n          topicname: topicName,\r\n          createdby: adminid,\r\n          videofile:videoFile,\r\n          content:content,\r\n          uploadedfile:uploadedFile,\r\n          updatedby:adminid,\r\n          updatedtime:Date.now().toString()\r\n        },\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n      .then(function (response) {\r\n        setToastClass('success');\r\n        setToastMessage('Success: ' + response.data);\r\n        showToast(true);\r\n\r\n        setLoading(false)\r\n        handleReset()\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error.response)\r\n        setToastClass('Warning');\r\n        setToastMessage('Warning: ' + error.response.data);\r\n        showToast(true);\r\n\r\n        setLoading(false)\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"animated fadeIn\">\r\n      <CRow>\r\n        <CCol xl=\"6\">\r\n          <CCard custom>\r\n            <CCardHeader >\r\n              <h5 >Topics </h5> {section ? '( Section: '+ section.sectionname+ ')' : ''}\r\n            </CCardHeader>\r\n            <CCardBody>\r\n              <CDataTable\r\n                items={topicList}\r\n                fields={fields}\r\n                // columnFilter\r\n                tableFilter\r\n                // footer\r\n                itemsPerPageSelect = {false}\r\n                itemsPerPage={currentPagination}\r\n                dark={false}\r\n                hover={false}\r\n                border={false}\r\n                outlined={false}\r\n                loading={false}\r\n                sorter={false}\r\n                // clickableRows\r\n                pagination={{ doubleArrows: true, align: 'center' }}\r\n                loading={loading}\r\n                // onRowClick={(item,index,col,e) => {console.log(item,index,col,e)}}\r\n                onPageChange={(val) => {\r\n                  setCurrentPage(val)\r\n                }\r\n                }\r\n                // onPagesChange={(val) => console.log('new pages:', val)}\r\n                onPaginationChange={(val) => {\r\n                  setCurrentPagination(val);\r\n                }}\r\n                // onFilteredItemsChange={(val) => console.log('new filtered items:', val)}\r\n                // onSorterValueChange={(val) => console.log('new sorter value:', val)}\r\n                // onTableFilterChange={(val) => console.log('new table filter:', val)}\r\n                // onColumnFilterChange={(val) => console.log('new column filter:', val)}\r\n                scopedSlots={{\r\n                  'actions':\r\n                    item => {\r\n                      return (\r\n                        <td className=\"py-2\" style={{display:'flex',justifyContent: 'flex-end',textAlign:'right'}}>\r\n                          {\r\n                              editId != item.topicid ?\r\n                              <CButton size=\"sm\" color=\"info\" onClick={(e) => { e.preventDefault(); editTopic(item) }}>Edit</CButton>\r\n                              : <CButton size=\"sm\" color=\"info\" disabled>Edit</CButton>\r\n                          }\r\n                          <CButton size=\"sm\" color=\"danger\" className=\"ml-1\" onClick={(e) => { e.preventDefault(); deleteTopic(item) }}>\r\n                            Delete\r\n                          </CButton>\r\n                        </td>\r\n                      )\r\n                    }\r\n                }}\r\n              />\r\n              <CRow>\r\n                <CCol xs=\"9\" md=\"8\" style={{alignSelf:\"center\", display:'flex'}}>\r\n                    <spin style={{marginTop:\"5px\", marginRight:\"5px\"}}>Items per page:</spin>\r\n                    <CSelect\r\n                      name=\"itemsperpage\"\r\n                      id=\"itemsperpage\"\r\n                      style={{width:\"70px\"}}\r\n                      onChange={e => setCurrentPagination(e.target.value)}\r\n                      value={currentPagination}>\r\n                      <option value=\"5\">5</option>\r\n                      <option value=\"10\">10</option>\r\n                      <option value=\"15\">15</option>\r\n                      <option value=\"20\">20</option>\r\n                    </CSelect>\r\n                </CCol>\r\n                <CCol xs=\"3\" md=\"4\" style={{alignSelf:\"center\"}}>\r\n                  <div  style={{textAlign: 'right' }}>\r\n                    <spin>\r\n                    {\r\n                      ((currentPage - 1) * currentPagination + 1) + '-' + getLastVal(currentPage) + ' of ' + topicList.length\r\n                    }\r\n                    </spin>\r\n                  </div>\r\n                </CCol>\r\n              </CRow>\r\n            </CCardBody>\r\n          </CCard>\r\n        </CCol>\r\n        <CCol xl=\"6\">\r\n          <CCard custom>\r\n            <CCardHeader id=\"headingOne\" style={{ display: 'inline-flex' }}>\r\n              {\r\n                  isAdd ? 'Add Topic' : 'Edit Topic'\r\n              }\r\n            </CCardHeader>\r\n            <CCardBody>\r\n              <CForm onSubmit={handleSubmit} className=\"form-horizontal\" name='simpleForm'>\r\n                <CInputGroup className=\"mb-3\">\r\n                  <CInputGroupPrepend>\r\n                    <CInputGroupText>@</CInputGroupText>\r\n                  </CInputGroupPrepend>\r\n                  <CInput type=\"text\"\r\n                      label=\"Topic Name\"\r\n                      name=\"topicname-input\"\r\n                      id=\"topicname-input\"\r\n                      placeholder=\"Topic Name\"\r\n                      autoComplete=\"given-name\"\r\n                      onChange={e => setTopicName(e.target.value) }\r\n                      value={topicName}\r\n                      required />\r\n                </CInputGroup>\r\n                {/* <CTextarea\r\n                      name=\"content\"\r\n                      id=\"content\"\r\n                      rows=\"5\"\r\n                      placeholder=\"Contents\"\r\n                      onChange={e => setContent(e.target.value)}\r\n                      required\r\n                      value={content}\r\n                      style={{marginBottom:10}}\r\n                    /> */}\r\n                    <ReactQuill name=\"content\" id=\"content\" placeholder=\"Contents\" value={content} modules={modules} onChange={setContent} style={{marginBottom:\"10px\"}} required/>\r\n                {/* <CInputFile\r\n                  id=\"file-input\"\r\n                  name=\"file-input\"\r\n                  onChange={setFileThumbnail}\r\n                  value={uploadedFile}\r\n                  style={{marginBottom:10}}\r\n                /> */}\r\n                <CRow>\r\n                  <CCol xs=\"7\" xl=\"6\" md=\"6\">\r\n                    <Button class='btn btn-primary btn-sm' variant=\"contained\" component=\"label\">\r\n                        <AttachFile /> &nbsp;Upload File\r\n                        <input type=\"file\" accept=\"*/*\" style={{display:\"none\"}} onChange={setFileThumbnail}/>\r\n                    </Button>\r\n                    <Fade in={fileLoading}><CSpinner grow color=\"primary\" style={{marginLeft:10,marginTop:5, width:20,height:20}}/></Fade>\r\n                  </CCol>\r\n                  <CCol xs=\"5\" xl=\"6\" md=\"6\">\r\n                    {/* <CCardBody> */}\r\n                      {uploadedFile}\r\n                    {/* </CCardBody>                       */}\r\n                  </CCol>\r\n                </CRow>\r\n\r\n                 <CRow>\r\n                  <CCol xs=\"7\" xl=\"6\" md=\"6\">\r\n                    <Button class='btn btn-primary btn-sm' variant=\"contained\" component=\"label\">\r\n                        <VideoLibraryIcon /> &nbsp; Upload Video\r\n                        <input type=\"file\" accept=\"video/*\" style={{display:\"none\"}} onChange={setVideoThumbnail}/>\r\n                    </Button>\r\n                    <Fade in={videoLoading}><CSpinner grow color=\"primary\" style={{marginLeft:10,marginTop:5, width:20,height:20}}/></Fade>\r\n                  </CCol>\r\n                  <CCol  xs=\"5\" xl=\"6\" md=\"6\">\r\n                    <span style={{cursor:\"pointer\", color:\"#321fdb\"}} onClick={(e)=>{e.preventDefault(); setVideoClicked(true)}}>{videoFile}</span>\r\n                  </CCol>\r\n                </CRow>\r\n\r\n                <hr/>\r\n                <div style={{width:\"150px\"}}>\r\n                  <CButton type=\"submit\" size=\"sm\" color=\"primary\" style={{marginRight:'10px'}}><CIcon name=\"cil-save\" /> Save</CButton>\r\n                  <CButton type=\"reset\"  size=\"sm\" color=\"danger\" onClick={handleReset} ><CIcon name=\"cil-ban\" /> Reset</CButton>\r\n                </div>\r\n                {\r\n                  videoClicked && video != null?\r\n                    <CRow>\r\n                      <CCol xs=\"12\" md=\"6\">\r\n                        <CCardBody>\r\n                          <ReactPlayer\r\n                            config={{ file: { attributes: { controlsList: 'nodownload' } } }}\r\n                            onContextMenu={e => e.preventDefault()}\r\n                            controls\r\n                            width=\"250\"\r\n                            height=\"125\"\r\n                            url={video}\r\n                            style={{height:`${videoHeight}`,backgroundRepeat:'no-repeat',backgroundPosition: 'center',marginTop:5}}\r\n                          />\r\n                        </CCardBody>\r\n                      </CCol>\r\n                    </CRow>\r\n                  :\"\"\r\n                }\r\n              </CForm>\r\n            </CCardBody>\r\n            {/* <CCardFooter>\r\n              <CButton type=\"submit\" size=\"sm\" color=\"primary\" onClick={handleSubmit}><CIcon name=\"cil-save\" /> Save</CButton>\r\n            </CCardFooter> */}\r\n          </CCard>\r\n        </CCol>\r\n        <CCol sm=\"12\" lg=\"6\">\r\n          <Snackbar\r\n            anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n            open={toast}\r\n            autoHideDuration={3000}\r\n            onClose={() => {\r\n              showToast(false);\r\n              toast ? getSectionList() : showToast(false);\r\n            }}>\r\n            <Alert\r\n              severity={toastClass}\r\n              action={\r\n                <CButton  onClick={(e) => { e.preventDefault(); showToast(false); getSectionList();  }}><CIcon name=\"cil-x\" /></CButton>\r\n              }\r\n            >\r\n              {toastMessage}\r\n            </Alert>\r\n          </Snackbar>\r\n        </CCol>\r\n      </CRow>\r\n    </div>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}